function MarkerClusterer(e,t,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,void 0!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var o=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=o.map_.getZoom(),t=o.map_.minZoom||0,r=Math.min(o.map_.maxZoom||100,o.map_.mapTypes[o.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),r),o.prevZoom_!=e&&(o.prevZoom_=e,o.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),t&&(t.length||Object.keys(t).length)&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,r){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=r||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function assert(e,t){if(!e){var r="";throw assert.caller&&assert.caller.name&&(r=assert.caller.name+": "),r+=t,new Error(r)}}function searchMatch(e,t){if("string"==typeof e&&"string"==typeof t||(e=e.toString(),t=t.toString()),e=e.toLowerCase().trim(),t=t.toLowerCase().trim(),""===e||""===t)return!1;var r=e.indexOf(t)>=0,s=t.indexOf(e)>=0;return r||s}function show(e,t){t?e.style.display="block":e.style.display="none"}function getTargetProperty(e,t){return e.dataset[t]}function getFilterCriteria(e){assert(e,"No filter provided.");var t=e.dataset.criteria;if("string"!=typeof t)return[];var r=t.split(" ");return r}function targetMatchesFilters(e,t){var r=!0,s=!0,o=!1,i=void 0;try{for(var a,n=t[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var l=a.value,u=getFilterCriteria(l),h=l.value;if(h!==PLACEHOLDER_VALUE){var p=!1,c=!0,d=!1,f=void 0;try{for(var g,y=u[Symbol.iterator]();!(c=(g=y.next()).done);c=!0){var _=g.value,v=getTargetProperty(e,_)||"";if(searchMatch(h,v)){p=!0;break}}}catch(m){d=!0,f=m}finally{try{!c&&y["return"]&&y["return"]()}finally{if(d)throw f}}if(!p){r=!1;break}}}}catch(m){o=!0,i=m}finally{try{!s&&n["return"]&&n["return"]()}finally{if(o)throw i}}return r}function handleUI(e){function t(e){return e.nodeName&&"INPUT"===e.nodeName?e.parentElement:e}assert(e&&e.length>0,"No search filters provided.");var r=!0,s=!1,o=void 0;try{for(var i,a=function(){var e=i.value;e.addEventListener("blur",function(){var r=e.value&&e.value.trim().length>0,s=e.selectedIndex&&e.selectedIndex>0;if(!r&&!s){var o=t(e);o.classList.remove("search-bar-btn-active")}}),e.addEventListener("focus",function(){var r=t(e);r.classList.add("search-bar-btn-active")})},n=e[Symbol.iterator]();!(r=(i=n.next()).done);r=!0)a()}catch(l){s=!0,o=l}finally{try{!r&&n["return"]&&n["return"]()}finally{if(s)throw o}}}function showOnMap(e,t){t.createMarkersFromCoordinates(e),t.createCluster()}function fillSearchFromQueryParameters(e){var t=MakeArg(),r=t.all(),s=Object.keys(r),o=!0,i=!1,a=void 0;try{for(var n,l=s[Symbol.iterator]();!(o=(n=l.next()).done);o=!0){var u=n.value,h=e.getFilterByCriterion(u);if(h){var p=r[u];p="string"==typeof p?p:p.toString(),e.fillFilter(h,p)}}}catch(c){i=!0,a=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(i)throw a}}e.applyFilters()}function initPage(){var e={searchBarSelector:SEARCH_BAR_SELECTOR,searchFieldsSelector:SEARCH_INPUT_SELECTOR,targetsContainerSelector:TILES_LIST_CONTAINER_SELECTOR,infoElSelector:SEARCH_INFO_SELECTOR,filtersAppliedcallback:function(e){var t=[],s=!0,o=!1,i=void 0;try{for(var a,n=e[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var l=a.value;l.dataset.longitude&&l.dataset.latitude&&t.push({latitude:l.dataset.latitude,longitude:l.dataset.longitude})}}catch(u){o=!0,i=u}finally{try{!s&&n["return"]&&n["return"]()}finally{if(o)throw i}}showOnMap(t,r)}},t=new SearchController(e),r=new MapController(MAP_TARGET_SELECTOR);fillSearchFromQueryParameters(t,r)}var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}();var globalObj={};!function(e){e.MakeArg=function(){var t=function r(){return r.get.apply(e,arguments)};return t.version="1.2.0",t.parse=function(e){if(!e)return{};if(-1===e.indexOf("=")&&-1===e.indexOf("&"))return{};e=t._cleanParamStr(e);var r={},s=e.split("&");for(var o in s)if(s.hasOwnProperty(o)){var i=s[o].split("="),a=decodeURIComponent(i[0]),n=t.__decode(i[1]);t._access(r,a,n)}return r},t.__decode=function(e){for(;e&&e.indexOf("+")>-1;)e=e.replace("+"," ");return e=decodeURIComponent(e)},t._access=function(e,r,s){var o="undefined"!=typeof s,i=-1,a={"true":!0,"false":!1,"null":null};if("string"!=typeof r&&"[object String]"!=toString.call(r)||(i=r.search(/[\.\[]/)),-1===i)return t.coerceMode&&(s=s&&!isNaN(s)?+s:"undefined"===s?void 0:void 0!==a[s]?a[s]:s),o?e[r]=s:e[r];var n=r.substr(0,i),l=r.substr(i+1);switch(r.charAt(i)){case"[":return e[n]=e[n]||[],l=l.replace("]",""),-1===l.search(/[\.\[]/)&&(l=parseInt(l,10)),t._access(e[n],l,s);case".":return e[n]=e[n]||{},t._access(e[n],l,s)}return e},t.stringify=function(e,r){switch("undefined"==typeof e?"undefined":babelHelpers["typeof"](e)){case"object":var s,o=[];for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];"undefined"!=typeof i&&0!==i.length&&"undefined"!=typeof a&&0!==a.length&&(s=r?r+"."+i:i,"undefined"!=typeof e.length&&(s=r?r+"["+i+"]":i),"object"===("undefined"==typeof a?"undefined":babelHelpers["typeof"](a))?o.push(t.stringify(a,s)):o.push(encodeURIComponent(s)+"="+encodeURIComponent(a)))}return o.join("&")}return encodeURIComponent(e)},t.url=function(){var e=t.urlUseHash?t.hashQuerySeperator:t.querySeperator,r=[location.pathname,e],s={};switch(arguments.length){case 1:r.push(t.stringify(arguments[0]));break;case 2:r[0]=t._cleanPath(arguments[0]),s=t.parse(arguments[0]),s=t.merge(s,arguments[1]),r.push(t.stringify(s));break;case 3:r[0]=t._cleanPath(arguments[0]),r[1]=t.querySeperator,r.push(t.stringify(arguments[1])),"string"==typeof arguments[2]?r.push(t.hashSeperator):r.push(t.hashQuerySeperator),r.push(t.stringify(arguments[2]))}var o=r.join("");return o.indexOf(e)==o.length-e.length&&(o=o.substr(0,o.length-e.length)),o},t.urlUseHash=!1,t.querySeperator="?",t.hashSeperator="#",t.hashQuerySeperator="#?",t.coerceMode=!0,t.all=function(){var e=t.parse(t.querystring()+"&"+t.hashstring());return t._all?t._all:t._all=e},t.get=function(e,r){var s=t._access(t.all(),e);return"undefined"==typeof s?r:s},t.query=function(){return t._query?t._query:t._query=t.parse(t.querystring())},t.hash=function(){return t._hash?t._hash:t._hash=t.parse(t.hashstring())},t.querystring=function(){return t._cleanParamStr(location.search)},t.hashstring=function(){return t._cleanParamStr(location.hash)},t._cleanParamStr=function(e){if(e.indexOf(t.querySeperator)>-1&&(e=e.split(t.querySeperator)[1]),e.indexOf(t.hashSeperator)>-1&&(e=e.split(t.hashSeperator)[1]),-1===e.indexOf("=")&&-1===e.indexOf("&"))return"";for(;0==e.indexOf(t.hashSeperator)||0==e.indexOf(t.querySeperator);)e=e.substr(1);return e},t._cleanPath=function(e){return e.indexOf(t.querySeperator)>-1&&(e=e.substr(0,e.indexOf(t.querySeperator))),e.indexOf(t.hashSeperator)>-1&&(e=e.substr(0,e.indexOf(t.hashSeperator))),e},t.merge=function(){var e={};for(var t in arguments)if(arguments.hasOwnProperty(t))for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=arguments[t][r]);return e},t},e.Arg=e.MakeArg()}(globalObj);var MakeArg=globalObj.MakeArg;MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;e=t[s];s++)r.extend(e.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var r=0,s=e.length,o=s;0!==o;)o=parseInt(o/10,10),r++;return r=Math.min(r,t),{text:s,index:r}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){if(e.length)for(var r,s=0;r=e[s];s++)this.pushMarkerTo_(r);else if(Object.keys(e).length)for(var r in e)this.pushMarkerTo_(e[r]);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,s=0;r=this.markers_[s];s++)if(r==e){t=s;break}return-1==t?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!t&&r?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var r,s=!1,o=0;r=e[o];o++){var i=this.removeMarker_(r);s=s||i}return!t&&s?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),s=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),o=t.fromLatLngToDivPixel(r);o.x+=this.gridSize_,o.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(s);i.x-=this.gridSize_,i.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(o),n=t.fromDivPixelToLatLng(i);return e.extend(a),e.extend(n),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();for(var s,r=0;s=this.markers_[r];r++)s.isAdded=!1,e&&s.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,r=0;t=e[r];r++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=6371,s=(t.lat()-e.lat())*Math.PI/180,o=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),n=r*a;return n},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,r=4e4,s=null,o=(e.getPosition(),0);t=this.clusters_[o];o++){var i=t.getCenter();if(i){var a=this.distanceBetweenPoints_(i,e.getPosition());r>a&&(r=a,s=t)}}if(s&&s.isMarkerInClusterBounds(e))s.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(t),s=0;e=this.markers_[s];s++)!e.isAdded&&this.isMarkerInBounds_(e,r)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,r=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,s=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var o=this.markers_.length;if(o<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),o==this.minClusterSize_)for(var i=0;o>i;i++)this.markers_[i].setMap(null);return o>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;e=r[s];s++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,s=0;r=this.markers_[s];s++)r.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var o=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var r=this;google.maps.event.addDomListener(this.div_,"click",function(){r.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+r+";"),"object"===babelHelpers["typeof"](this.anchor_)?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+s+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,Object.keys=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};var MapController=function(){function e(t){babelHelpers.classCallCheck(this,e),this.markers=[],this.map=this.initMap(t)}return babelHelpers.createClass(e,[{key:"initMap",value:function(e){var t={mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:14,scrollwheel:!1,maxZoom:17},r=new google.maps.Map(document.querySelector(e),t);return r}},{key:"createRandomMarkers",value:function(){var e=arguments.length<=0||void 0===arguments[0]?5:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.map:arguments[1],r=.17,s=.03,o=new google.maps.LatLng(51.500524,-.1769147),i=[];t===this.map&&(this.clearAllMarkers(this.markers),this.markers=i);for(var a=1;e>a;a++){var n=new google.maps.LatLng(o.lat()-s/2+s*Math.random(),o.lng()-r/2+r*Math.random()),l=new google.maps.Marker({position:n,map:t});i.push(l)}return this.createCluster(i,t),this.centerOnMarkers(i,t),i}},{key:"createMarkersFromCoordinates",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.map:arguments[1],r=[];t===this.map&&(this.clearAllMarkers(this.markers),this.markers=r);var s=!0,o=!1,i=void 0;try{for(var a,n=e[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var l=a.value,u=new google.maps.LatLng(l.latitude,l.longitude),h=new google.maps.Marker({position:u,map:t});r.push(h)}}catch(p){o=!0,i=p}finally{try{!s&&n["return"]&&n["return"]()}finally{if(o)throw i}}return this.centerOnMarkers(r,t),r}},{key:"centerOnMarkers",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.markers:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.map:arguments[1],r=new google.maps.LatLngBounds,s=!0,o=!1,i=void 0;try{for(var a,n=e[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var l=a.value;r.extend(l.getPosition())}}catch(u){o=!0,i=u}finally{try{!s&&n["return"]&&n["return"]()}finally{if(o)throw i}}t.fitBounds(r)}},{key:"createCluster",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.markers:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.map:arguments[1],r={styles:[{textColor:"white",url:"img/marker.svg",height:52,width:31}],minimumClusterSize:1},s=new MarkerClusterer(t,e,r);return s}},{key:"clearAllMarkers",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?this.markers:arguments[0];e.length;)e.pop().setMap(null);return e}},{key:"triggerResize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.map:arguments[0];google.maps.event.trigger(e,"resize"),e.setZoom(16)}}]),e}(),PLACEHOLDER_VALUE="",HIDDEN_CLASS="hidden",SearchController=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];babelHelpers.classCallCheck(this,e);var r=t.searchBarSelector,s=t.searchFieldsSelector,o=t.targetsContainerSelector,i=t.infoElSelector,a=t.filtersAppliedcallback,n=document.querySelector(r);assert(n&&n.nodeName,"No search bar found using selectos '"+r+"'"),this.searchBarEl=n;var l=Array.from(n.querySelectorAll(s));assert(l&&l.length,"No search fields found with selector '"+s+"'"),this.filters=l.reverse();var u=document.querySelector(o);assert(u&&u.nodeName,"No valid search container found using selector "+o+"."),this.targetsContainer=u;var h=document.querySelector(i);assert(h&&h.nodeName,"No valid info element found using selector "+i+"."),this.infoEl=h,"function"==typeof a?this.filtersAppliedcallback=a:this.filtersAppliedcallback=function(){return null},handleUI(l),this._initFilterElements(l)}return babelHelpers.createClass(e,[{key:"_initFilterElements",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.filters:arguments[0],r=!0,s=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var n=i.value,l="SELECT"===n.nodeName?"change":"keyup";n.addEventListener(l,function(){e.applyFilters()})}}catch(u){s=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(s)throw o}}}},{key:"applyFilters",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.filters:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.targetsContainer:arguments[1],r=arguments.length<=2||void 0===arguments[2]?this.infoEl:arguments[2];assert(e,"No filters provided."),assert(t,"No filter targets container provided"),assert(r,"No info element provided");var s=Array.from(t.children);0===s.length&&console.warn("No target elements being filtered.");var o=[],i=[],a=!0,n=!1,l=void 0;try{for(var u,h=s[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var p=u.value,c=targetMatchesFilters(p,e),d=c?o:i;d.push(p)}}catch(f){n=!0,l=f}finally{try{!a&&h["return"]&&h["return"]()}finally{if(n)throw l}}return 0===o.length?(r.classList.remove(HIDDEN_CLASS),r.innerText="No properties were found using these filters",o=s,i=[]):r.classList.add(HIDDEN_CLASS),o.forEach(function(e){show(e,!0)}),i.forEach(function(e){show(e,!1)}),this.filtersAppliedcallback(o,i),o}},{key:"fillFilter",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?this.filters:arguments[2],s=void 0;s="number"==typeof e?r[e]:e,assert(s&&s.nodeName,"Invalid 'filterReference' provided: "+s),assert("string"==typeof t,"Invalid 'value' value: "+t);var o="INPUT"===s.nodeName&&s.getAttribute("type")&&("search"===s.getAttribute("type").toLowerCase()||"text"===s.getAttribute("type").toLowerCase());if(o)s.value=t;else if("SELECT"===s.nodeName){var i=Array.from(s.querySelectorAll("option")),a=i.map(function(e){return e.selected?PLACEHOLDER_VALUE:e.getAttribute("value")||e.innerHTML}),n=a.findIndex(function(e){return searchMatch(t,e)});n>-1?s.selectedIndex=n:console.warn("No option available for value '"+t+"'")}}},{key:"getFilterByCriterion",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.filters:arguments[1],r=!0,s=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var n=i.value,l=getFilterCriteria(n);if(l.indexOf(e)>-1)return n}}catch(u){s=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(s)throw o}}return null}}]),e}(),SEARCH_BAR_SELECTOR=".search-bar",MAP_TARGET_SELECTOR=".js-property-map",TILES_LIST_CONTAINER_SELECTOR=".js-property-list",SEARCH_INPUT_SELECTOR=".js-search-input",SEARCH_INFO_SELECTOR=".js-search-info";initPage();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaC9zZWFyY2guanMiXSwibmFtZXMiOlsiTWFya2VyQ2x1c3RlcmVyIiwibWFwIiwib3B0X21hcmtlcnMiLCJvcHRfb3B0aW9ucyIsInRoaXMiLCJleHRlbmQiLCJnb29nbGUiLCJtYXBzIiwiT3ZlcmxheVZpZXciLCJtYXBfIiwibWFya2Vyc18iLCJjbHVzdGVyc18iLCJzaXplcyIsInN0eWxlc18iLCJyZWFkeV8iLCJvcHRpb25zIiwiZ3JpZFNpemVfIiwibWluQ2x1c3RlclNpemVfIiwibWF4Wm9vbV8iLCJpbWFnZVBhdGhfIiwiTUFSS0VSX0NMVVNURVJfSU1BR0VfUEFUSF8iLCJpbWFnZUV4dGVuc2lvbl8iLCJNQVJLRVJfQ0xVU1RFUl9JTUFHRV9FWFRFTlNJT05fIiwiem9vbU9uQ2xpY2tfIiwidW5kZWZpbmVkIiwiYXZlcmFnZUNlbnRlcl8iLCJzZXR1cFN0eWxlc18iLCJzZXRNYXAiLCJwcmV2Wm9vbV8iLCJnZXRab29tIiwidGhhdCIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJ6b29tIiwibWluWm9vbSIsIm1heFpvb20iLCJNYXRoIiwibWluIiwibWFwVHlwZXMiLCJnZXRNYXBUeXBlSWQiLCJtYXgiLCJyZXNldFZpZXdwb3J0IiwicmVkcmF3IiwibGVuZ3RoIiwiT2JqZWN0Iiwia2V5cyIsImFkZE1hcmtlcnMiLCJDbHVzdGVyIiwibWFya2VyQ2x1c3RlcmVyIiwibWFya2VyQ2x1c3RlcmVyXyIsImdldE1hcCIsImdldEdyaWRTaXplIiwiZ2V0TWluQ2x1c3RlclNpemUiLCJpc0F2ZXJhZ2VDZW50ZXIiLCJjZW50ZXJfIiwiYm91bmRzXyIsImNsdXN0ZXJJY29uXyIsIkNsdXN0ZXJJY29uIiwiZ2V0U3R5bGVzIiwiY2x1c3RlciIsInN0eWxlcyIsIm9wdF9wYWRkaW5nIiwiZ2V0TWFya2VyQ2x1c3RlcmVyIiwicGFkZGluZ18iLCJjbHVzdGVyXyIsImRpdl8iLCJzdW1zXyIsInZpc2libGVfIiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwiZXJyb3JNZXNzYWdlIiwiY29tcGxldGVFcnJvck1lc3NhZ2UiLCJjYWxsZXIiLCJuYW1lIiwiRXJyb3IiLCJzZWFyY2hNYXRjaCIsInR4dDEiLCJ0eHQyIiwidG9TdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJmb3VuZEluc2lkZVR4dDEiLCJpbmRleE9mIiwiZm91bmRJbnNpZGVUeHQyIiwic2hvdyIsImVsIiwic2hvd0Jvb2wiLCJzdHlsZSIsImRpc3BsYXkiLCJnZXRUYXJnZXRQcm9wZXJ0eSIsInRhcmdldCIsInByb3BlcnR5IiwiZGF0YXNldCIsImdldEZpbHRlckNyaXRlcmlhIiwiZmlsdGVyIiwiY3JpdGVyaWFTdHJpbmciLCJjcml0ZXJpYSIsInNwbGl0IiwidGFyZ2V0TWF0Y2hlc0ZpbHRlcnMiLCJmaWx0ZXJzIiwibWF0Y2hlZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240IiwiX2RpZEl0ZXJhdG9yRXJyb3I0IiwiX2l0ZXJhdG9yRXJyb3I0IiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJ2YWx1ZSIsIlBMQUNFSE9MREVSX1ZBTFVFIiwiZmlsdGVyTWF0Y2hlZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241IiwiX2RpZEl0ZXJhdG9yRXJyb3I1IiwiX2l0ZXJhdG9yRXJyb3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsImNyaXRlcmlvbiIsInRhcmdldFByb3BlcnR5VmFsdWUiLCJlcnIiLCJoYW5kbGVVSSIsImdldEJ1dHRvbkNvbnRhaW5lciIsImJ0biIsIm5vZGVOYW1lIiwicGFyZW50RWxlbWVudCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242IiwiX2RpZEl0ZXJhdG9yRXJyb3I2IiwiX2l0ZXJhdG9yRXJyb3I2IiwiX3N0ZXA2IiwiX2xvb3AiLCJhZGRFdmVudExpc3RlbmVyIiwiZmlsbGVkSW5wdXQiLCJub25QbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkIiwic2VsZWN0ZWRJbmRleCIsImNvbnRhaW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIl9pdGVyYXRvcjYiLCJzaG93T25NYXAiLCJjb29yZGluYXRlcyIsIm1hcENvbnRyb2xsZXIiLCJjcmVhdGVNYXJrZXJzRnJvbUNvb3JkaW5hdGVzIiwiY3JlYXRlQ2x1c3RlciIsImZpbGxTZWFyY2hGcm9tUXVlcnlQYXJhbWV0ZXJzIiwic2VhcmNoQ29udHJvbGxlciIsIkFyZyIsIk1ha2VBcmciLCJnZXRQYXJhbWV0ZXJzIiwiYWxsIiwiZ2V0UGFyYW1ldGVyc0tleXMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwicGFyIiwiZ2V0RmlsdGVyQnlDcml0ZXJpb24iLCJmaWxsRmlsdGVyIiwiYXBwbHlGaWx0ZXJzIiwiaW5pdFBhZ2UiLCJzZWFyY2hDb250cm9sbGVyQ29uZmlnIiwic2VhcmNoQmFyU2VsZWN0b3IiLCJTRUFSQ0hfQkFSX1NFTEVDVE9SIiwic2VhcmNoRmllbGRzU2VsZWN0b3IiLCJTRUFSQ0hfSU5QVVRfU0VMRUNUT1IiLCJ0YXJnZXRzQ29udGFpbmVyU2VsZWN0b3IiLCJUSUxFU19MSVNUX0NPTlRBSU5FUl9TRUxFQ1RPUiIsImluZm9FbFNlbGVjdG9yIiwiU0VBUkNIX0lORk9fU0VMRUNUT1IiLCJmaWx0ZXJzQXBwbGllZGNhbGxiYWNrIiwibWF0Y2hlcyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInRpbGUiLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsInB1c2giLCJTZWFyY2hDb250cm9sbGVyIiwiTWFwQ29udHJvbGxlciIsIk1BUF9UQVJHRVRfU0VMRUNUT1IiLCJiYWJlbEhlbHBlcnMiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImNsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsImNyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiaSIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsImdsb2JhbE9iaiIsImdsb2JhbCIsImdldCIsImFwcGx5IiwiYXJndW1lbnRzIiwidmVyc2lvbiIsInBhcnNlIiwicyIsIl9jbGVhblBhcmFtU3RyIiwicGFpcnMiLCJwaSIsImhhc093blByb3BlcnR5Iiwia3ZzZWdzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidmFsIiwiX19kZWNvZGUiLCJfYWNjZXNzIiwicmVwbGFjZSIsInNlbGVjdG9yIiwic2hvdWxkU2V0Iiwic2VsZWN0b3JCcmVhayIsImNvZXJjZV90eXBlcyIsInRydWUiLCJmYWxzZSIsIm51bGwiLCJjYWxsIiwic2VhcmNoIiwiY29lcmNlTW9kZSIsImlzTmFOIiwiY3VycmVudFJvb3QiLCJzdWJzdHIiLCJuZXh0U2VsZWN0b3IiLCJjaGFyQXQiLCJwYXJzZUludCIsInN0cmluZ2lmeSIsImtleVByZWZpeCIsInRoaXNLZXkiLCJzZWdzIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsInVybCIsInNlcCIsInVybFVzZUhhc2giLCJoYXNoUXVlcnlTZXBlcmF0b3IiLCJxdWVyeVNlcGVyYXRvciIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJhcmdzIiwiX2NsZWFuUGF0aCIsIm1lcmdlIiwiaGFzaFNlcGVyYXRvciIsIm1lcmdlZCIsInF1ZXJ5c3RyaW5nIiwiaGFzaHN0cmluZyIsIl9hbGwiLCJkZWYiLCJxdWVyeSIsIl9xdWVyeSIsImhhc2giLCJfaGFzaCIsInAiLCJhaSIsImsiLCJvYmoxIiwib2JqMiIsIm9iamVjdCIsIm9uQWRkIiwic2V0UmVhZHlfIiwiZHJhdyIsInNpemUiLCJoZWlnaHQiLCJ3aWR0aCIsImZpdE1hcFRvTWFya2VycyIsIm1hcmtlciIsIm1hcmtlcnMiLCJnZXRNYXJrZXJzIiwiYm91bmRzIiwiTGF0TG5nQm91bmRzIiwiZ2V0UG9zaXRpb24iLCJmaXRCb3VuZHMiLCJzZXRTdHlsZXMiLCJpc1pvb21PbkNsaWNrIiwiZ2V0VG90YWxNYXJrZXJzIiwic2V0TWF4Wm9vbSIsImdldE1heFpvb20iLCJjYWxjdWxhdG9yXyIsIm51bVN0eWxlcyIsImluZGV4IiwiY291bnQiLCJkdiIsInRleHQiLCJzZXRDYWxjdWxhdG9yIiwiY2FsY3VsYXRvciIsImdldENhbGN1bGF0b3IiLCJvcHRfbm9kcmF3IiwicHVzaE1hcmtlclRvXyIsImlzQWRkZWQiLCJyZXBhaW50IiwiYWRkTWFya2VyIiwicmVtb3ZlTWFya2VyXyIsIm0iLCJzcGxpY2UiLCJyZW1vdmVNYXJrZXIiLCJyZW1vdmVkIiwicmVtb3ZlTWFya2VycyIsInIiLCJyZWFkeSIsImNyZWF0ZUNsdXN0ZXJzXyIsImdldFRvdGFsQ2x1c3RlcnMiLCJzZXRHcmlkU2l6ZSIsInNldE1pbkNsdXN0ZXJTaXplIiwiZ2V0RXh0ZW5kZWRCb3VuZHMiLCJwcm9qZWN0aW9uIiwiZ2V0UHJvamVjdGlvbiIsInRyIiwiTGF0TG5nIiwiZ2V0Tm9ydGhFYXN0IiwibGF0IiwibG5nIiwiYmwiLCJnZXRTb3V0aFdlc3QiLCJ0clBpeCIsImZyb21MYXRMbmdUb0RpdlBpeGVsIiwieCIsInkiLCJibFBpeCIsIm5lIiwiZnJvbURpdlBpeGVsVG9MYXRMbmciLCJzdyIsImlzTWFya2VySW5Cb3VuZHNfIiwiY29udGFpbnMiLCJjbGVhck1hcmtlcnMiLCJvcHRfaGlkZSIsIm9sZENsdXN0ZXJzIiwic2xpY2UiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyIsInAxIiwicDIiLCJSIiwiZExhdCIsIlBJIiwiZExvbiIsImEiLCJzaW4iLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiZCIsImFkZFRvQ2xvc2VzdENsdXN0ZXJfIiwiZGlzdGFuY2UiLCJjbHVzdGVyVG9BZGRUbyIsImNlbnRlciIsImdldENlbnRlciIsImlzTWFya2VySW5DbHVzdGVyQm91bmRzIiwibWFwQm91bmRzIiwiZ2V0Qm91bmRzIiwiaXNNYXJrZXJBbHJlYWR5QWRkZWQiLCJsIiwiY2FsY3VsYXRlQm91bmRzXyIsImxlbiIsInVwZGF0ZUljb24iLCJnZXRTaXplIiwibXoiLCJoaWRlIiwic3VtcyIsInNldENlbnRlciIsInNldFN1bXMiLCJ0cmlnZ2VyQ2x1c3RlckNsaWNrIiwidHJpZ2dlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBvcyIsImdldFBvc0Zyb21MYXRMbmdfIiwiY3NzVGV4dCIsImNyZWF0ZUNzcyIsImlubmVySFRNTCIsInBhbmVzIiwiZ2V0UGFuZXMiLCJvdmVybGF5TW91c2VUYXJnZXQiLCJhcHBlbmRDaGlsZCIsImFkZERvbUxpc3RlbmVyIiwibGF0bG5nIiwid2lkdGhfIiwiaGVpZ2h0XyIsInRvcCIsImxlZnQiLCJvblJlbW92ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInRleHRfIiwiaW5kZXhfIiwidXNlU3R5bGUiLCJ1cmxfIiwidGV4dENvbG9yXyIsImFuY2hvcl8iLCJ0ZXh0U2l6ZV8iLCJiYWNrZ3JvdW5kUG9zaXRpb25fIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwidHh0Q29sb3IiLCJ0eHRTaXplIiwibyIsInJlc3VsdCIsInRhcmdldFNlbGVjdG9yIiwiaW5pdE1hcCIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJzY3JvbGx3aGVlbCIsIk1hcCIsInF1ZXJ5U2VsZWN0b3IiLCJhbW91bnQiLCJsbmdTcGFuIiwibGF0U3BhbiIsIm15TGF0TG5nIiwiY2xlYXJBbGxNYXJrZXJzIiwicmFuZG9tIiwiTWFya2VyIiwicG9zaXRpb24iLCJjZW50ZXJPbk1hcmtlcnMiLCJjb29yZCIsIm1hcmtlckNsdXN0ZXJlck9wdGlvbnMiLCJ0ZXh0Q29sb3IiLCJtaW5pbXVtQ2x1c3RlclNpemUiLCJtYXJrZXJDbHVzdGVyIiwicG9wIiwic2V0Wm9vbSIsIkhJRERFTl9DTEFTUyIsImNvbmZpZyIsInNlYXJjaEJhckVsIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInJldmVyc2UiLCJ0YXJnZXRzQ29udGFpbmVyIiwiaW5mb0VsIiwiX2luaXRGaWx0ZXJFbGVtZW50cyIsIl90aGlzIiwiY2hlY2tFdmVudCIsInRhcmdldHMiLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJ3YXJuIiwibm9uTWF0Y2hlcyIsIm1hdGNoIiwiZGVzdGluYXRpb24iLCJpbm5lclRleHQiLCJmb3JFYWNoIiwiZmlsdGVyUmVmZXJlbmNlIiwiaXNUeXBlYWJsZUlucHV0IiwiZ2V0QXR0cmlidXRlIiwib3B0aW9uRWxlbWVudHMiLCJvcHRpb25WYWx1ZXMiLCJvcHRpb25FbCIsInNlbGVjdGVkIiwidmFsdWVPcHRpb25JbmRleCIsImZpbmRJbmRleCIsIm9wdGlvblZhbHVlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMiLCJfZGlkSXRlcmF0b3JFcnJvcjMiLCJfaXRlcmF0b3JFcnJvcjMiLCJfc3RlcDMiLCJfaXRlcmF0b3IzIiwiZmlsdGVyQ3JpdGVyaWEiXSwibWFwcGluZ3MiOiJBQW1hQSxRQUFTQSxpQkFBZ0JDLEVBQUtDLEVBQWFDLEdBTXpDQyxLQUFLQyxPQUFPTCxnQkFBaUJNLE9BQU9DLEtBQUtDLGFBQ3pDSixLQUFLSyxLQUFPUixFQU1aRyxLQUFLTSxZQUtMTixLQUFLTyxhQUVMUCxLQUFLUSxPQUFTLEdBQUksR0FBSSxHQUFJLEdBQUksSUFLOUJSLEtBQUtTLFdBTUxULEtBQUtVLFFBQVMsQ0FFZCxJQUFJQyxHQUFVWixLQU1kQyxNQUFLWSxVQUFZRCxFQUFrQixVQUFLLEdBS3hDWCxLQUFLYSxnQkFBa0JGLEVBQTRCLG9CQUFLLEVBTXhEWCxLQUFLYyxTQUFXSCxFQUFpQixTQUFLLEtBRXRDWCxLQUFLUyxRQUFVRSxFQUFnQixXQU0vQlgsS0FBS2UsV0FBYUosRUFBbUIsV0FBS1gsS0FBS2dCLDJCQU0v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QUFLLGtDQUFxQ25WLEVBQVEsU0FLaEUyRixJQUFLLHVCQUNMM0YsTUFBTyxTQUE4QlEsR0FDbkMsR0FBSW5CLEdBQVU4RyxVQUFVdEssUUFBVSxHQUFzQm5CLFNBQWpCeUwsVUFBVSxHQUFtQjdNLEtBQUsrRixRQUFVOEcsVUFBVSxHQUN6RmdRLEdBQTZCLEVBQzdCQyxHQUFxQixFQUNyQkMsRUFBa0IzYixNQUV0QixLQUNFLElBQUssR0FBNkM0YixHQUF6Q0MsRUFBYWxYLEVBQVFPLE9BQU9DLGNBQXVCc1csR0FBOEJHLEVBQVNDLEVBQVd6VyxRQUFRQyxNQUFPb1csR0FBNkIsRUFBTSxDQUM5SixHQUFJblgsR0FBU3NYLEVBQU90VyxNQUVoQndXLEVBQWlCelgsa0JBQWtCQyxFQUN2QyxJQUFJd1gsRUFBZXBZLFFBQVFvQyxHQUFhLEdBQ3RDLE1BQU94QixJQUdYLE1BQU8wQixHQUNQMFYsR0FBcUIsRUFDckJDLEVBQWtCM1YsRUFDbEIsUUFDQSxLQUNPeVYsR0FBOEJJLEVBQUFBLFdBQ2pDQSxFQUFBQSxZQUVGLFFBQ0EsR0FBSUgsRUFDRixLQUFNQyxJQUtaLE1BQU8sVUFHSjdSLEtBME1MbEIsb0JBQXNCLGNBQ3RCb0Isb0JBQXNCLG1CQUN0QmhCLDhCQUFnQyxvQkFDaENGLHNCQUF3QixtQkFDeEJJLHFCQUF1QixpQkE2RzNCVCIsImZpbGUiOiJzZWFyY2gvc2VhcmNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhYmVsSGVscGVycyA9IHt9O1xuYmFiZWxIZWxwZXJzLnR5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG59O1xuXG5iYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxuYmFiZWxIZWxwZXJzLmNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSgpO1xuXG5iYWJlbEhlbHBlcnM7XG5cbi8qXG5cbiAgYXJnLmpzIC0gdjEuM1xuICBKYXZhU2NyaXB0IFVSTCBhcmd1bWVudCBwcm9jZXNzaW5nIG9uY2UgYW5kIGZvciBhbGwuXG5cbiAgYnkgTWF0IFJ5ZXIgYW5kIFJ5YW4gUXVpbm5cbiAgQ29weXJpZ2h0IChjKSAyMDEzIFN0cmV0Y2hyLCBJbmMuXG5cbiAgUGxlYXNlIGNvbnNpZGVyIHByb21vdGluZyB0aGlzIHByb2plY3QgaWYgeW91IGZpbmQgaXQgdXNlZnVsLlxuXG4gIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpc1xuICBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSxcbiAgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zXG4gIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllc1xuICBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELFxuICBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSXG4gIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFXG4gIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuICBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbiovXG5cbnZhciBnbG9iYWxPYmogPSB7fTtcblxuKGZ1bmN0aW9uIChnbG9iYWwpIHtcblxuICAvKipcbiAgICogTWFrZUFyZyBtYWtlcyB0aGUgQXJnIG5hbWVzcGFjZS5cbiAgICogdmFyIEFyZyA9IE1ha2VBcmcoKTtcbiAgICovXG4gIGdsb2JhbC5NYWtlQXJnID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICB2YXIgQXJnID0gZnVuY3Rpb24gQXJnKCkge1xuICAgICAgcmV0dXJuIEFyZy5nZXQuYXBwbHkoZ2xvYmFsLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgQXJnLnZlcnNpb24gPSBcIjEuMi4wXCI7XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGFyZyBzdHJpbmcgaW50byBhbiBBcmcuQXJnIG9iamVjdC5cbiAgICAgKi9cbiAgICBBcmcucGFyc2UgPSBmdW5jdGlvbiAocykge1xuICAgICAgaWYgKCFzKSByZXR1cm4ge307XG4gICAgICBpZiAocy5pbmRleE9mKFwiPVwiKSA9PT0gLTEgJiYgcy5pbmRleE9mKFwiJlwiKSA9PT0gLTEpIHJldHVybiB7fTtcbiAgICAgIHMgPSBBcmcuX2NsZWFuUGFyYW1TdHIocyk7XG4gICAgICB2YXIgb2JqID0ge307XG4gICAgICB2YXIgcGFpcnMgPSBzLnNwbGl0KFwiJlwiKTtcbiAgICAgIGZvciAodmFyIHBpIGluIHBhaXJzKSB7XG4gICAgICAgIGlmIChwYWlycy5oYXNPd25Qcm9wZXJ0eShwaSkpIHtcbiAgICAgICAgICB2YXIga3ZzZWdzID0gcGFpcnNbcGldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGt2c2Vnc1swXSksXG4gICAgICAgICAgICAgIHZhbCA9IEFyZy5fX2RlY29kZShrdnNlZ3NbMV0pO1xuICAgICAgICAgIEFyZy5fYWNjZXNzKG9iaiwga2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgVVJMIGNvbXBvbmVudCAoaW5jbHVkaW5nIHJlc29sdmluZyArIHRvIHNwYWNlcylcbiAgICAgKi9cbiAgICBBcmcuX19kZWNvZGUgPSBmdW5jdGlvbiAocykge1xuICAgICAgd2hpbGUgKHMgJiYgcy5pbmRleE9mKFwiK1wiKSA+IC0xKSB7XG4gICAgICAgIHMgPSBzLnJlcGxhY2UoXCIrXCIsIFwiIFwiKTtcbiAgICAgIH07XG4gICAgICBzID0gZGVjb2RlVVJJQ29tcG9uZW50KHMpO1xuICAgICAgcmV0dXJuIHM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gZ2V0L3NldCBkZWVwIG5lc3RlZCB2YWx1ZXMgaW4gYW4gb2JqZWN0IGJhc2VkIG9uIGEgc3RyaW5nIHNlbGVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogICAgICAgIEJhc2VkIG9iamVjdCB0byBlaXRoZXIgZ2V0L3NldCBzZWxlY3RvciBvblxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gIHNlbGVjdG9yICAgT2JqZWN0IHNlbGVjdG9yIGllIGZvb1swXVsxXS5iYXJbMF0uYmF6LmZvb2JhclxuICAgICAqIEBwYXJhbSAge01peGVkfSAgIHZhbHVlICAgICAgKG9wdGlvbmFsKSBWYWx1ZSB0byBzZXQgbGVhZiBsb2NhdGVkIGF0IGBzZWxlY3RvcmAgdG8uXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB2YWx1ZSBpcyB1bmRlZmluZWQsIG9wZXJhdGVzIGluICdnZXQnIG1vZGUgdG8gcmV0dXJuIHZhbHVlIGF0IG9iai0+c2VsZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtNaXhlZH1cbiAgICAgKi9cbiAgICBBcmcuX2FjY2VzcyA9IGZ1bmN0aW9uIChvYmosIHNlbGVjdG9yLCB2YWx1ZSkge1xuICAgICAgdmFyIHNob3VsZFNldCA9IHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIHZhciBzZWxlY3RvckJyZWFrID0gLTE7XG4gICAgICB2YXIgY29lcmNlX3R5cGVzID0ge1xuICAgICAgICAndHJ1ZSc6IHRydWUsXG4gICAgICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICAgICAnbnVsbCc6IG51bGxcbiAgICAgIH07XG5cbiAgICAgIC8vIHNlbGVjdG9yIGNvdWxkIGJlIGEgbnVtYmVyIGlmIHdlJ3JlIGF0IGEgbnVtZXJpY2FsIGluZGV4IGxlYWYgaW4gd2hpY2ggY2FzZSBzZWxlY3Rvci5zZWFyY2ggaXMgbm90IHZhbGlkXG4gICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09ICdzdHJpbmcnIHx8IHRvU3RyaW5nLmNhbGwoc2VsZWN0b3IpID09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICAgIHNlbGVjdG9yQnJlYWsgPSBzZWxlY3Rvci5zZWFyY2goL1tcXC5cXFtdLyk7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vIGRvdCBvciBhcnJheSBub3RhdGlvbiBzbyB3ZSdyZSBhdCBhIGxlYWYsIHNldCB2YWx1ZVxuICAgICAgaWYgKHNlbGVjdG9yQnJlYWsgPT09IC0xKSB7XG4gICAgICAgIGlmIChBcmcuY29lcmNlTW9kZSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgJiYgIWlzTmFOKHZhbHVlKSA/ICt2YWx1ZSAvLyBudW1iZXJcbiAgICAgICAgICA6IHZhbHVlID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCAvLyB1bmRlZmluZWRcbiAgICAgICAgICA6IGNvZXJjZV90eXBlc1t2YWx1ZV0gIT09IHVuZGVmaW5lZCA/IGNvZXJjZV90eXBlc1t2YWx1ZV0gLy8gdHJ1ZSwgZmFsc2UsIG51bGxcbiAgICAgICAgICA6IHZhbHVlOyAvLyBzdHJpbmdcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hvdWxkU2V0ID8gb2JqW3NlbGVjdG9yXSA9IHZhbHVlIDogb2JqW3NlbGVjdG9yXTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhhbXBsZTpcbiAgICAgIC8vIHNlbGVjdG9yICAgICA9ICdmb29bMF0uYmFyLmJhelsyXSdcbiAgICAgIC8vIGN1cnJlbnRSb290ICA9ICdmb28nXG4gICAgICAvLyBuZXh0U2VsZWN0b3IgPSAnMF0uYmFyLmJhelsyXScgLT4gd2lsbCBiZSBjb252ZXJ0ZWQgdG8gJzAuYmFyLmJhelsyXScgaW4gYmVsb3cgc3dpdGNoIHN0YXRlbWVudFxuICAgICAgdmFyIGN1cnJlbnRSb290ID0gc2VsZWN0b3Iuc3Vic3RyKDAsIHNlbGVjdG9yQnJlYWspO1xuICAgICAgdmFyIG5leHRTZWxlY3RvciA9IHNlbGVjdG9yLnN1YnN0cihzZWxlY3RvckJyZWFrICsgMSk7XG5cbiAgICAgIHN3aXRjaCAoc2VsZWN0b3IuY2hhckF0KHNlbGVjdG9yQnJlYWspKSB7XG4gICAgICAgIGNhc2UgJ1snOlxuICAgICAgICAgIC8vIEludGlhbGl6ZSBub2RlIGFzIGFuIGFycmF5IGlmIHdlIGhhdmVuJ3QgdmlzdGVkIGl0IGJlZm9yZVxuICAgICAgICAgIG9ialtjdXJyZW50Um9vdF0gPSBvYmpbY3VycmVudFJvb3RdIHx8IFtdO1xuICAgICAgICAgIG5leHRTZWxlY3RvciA9IG5leHRTZWxlY3Rvci5yZXBsYWNlKCddJywgJycpO1xuXG4gICAgICAgICAgaWYgKG5leHRTZWxlY3Rvci5zZWFyY2goL1tcXC5cXFtdLykgPT09IC0xKSB7XG4gICAgICAgICAgICBuZXh0U2VsZWN0b3IgPSBwYXJzZUludChuZXh0U2VsZWN0b3IsIDEwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gQXJnLl9hY2Nlc3Mob2JqW2N1cnJlbnRSb290XSwgbmV4dFNlbGVjdG9yLCB2YWx1ZSk7XG4gICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgIC8vIEludGlhbGl6ZSBub2RlIGFzIGFuIG9iamVjdCBpZiB3ZSBoYXZlbid0IHZpc3RlZCBpdCBiZWZvcmVcbiAgICAgICAgICBvYmpbY3VycmVudFJvb3RdID0gb2JqW2N1cnJlbnRSb290XSB8fCB7fTtcbiAgICAgICAgICByZXR1cm4gQXJnLl9hY2Nlc3Mob2JqW2N1cnJlbnRSb290XSwgbmV4dFNlbGVjdG9yLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFR1cm5zIHRoZSBzcGVjaWZpZWQgb2JqZWN0IGludG8gYSBVUkwgcGFyYW1ldGVyIHN0cmluZy5cbiAgICAgKi9cbiAgICBBcmcuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKG9iaiwga2V5UHJlZml4KSB7XG5cbiAgICAgIHN3aXRjaCAodHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBiYWJlbEhlbHBlcnMudHlwZW9mKG9iaikpIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgIHZhciBzZWdzID0gW107XG4gICAgICAgICAgdmFyIHRoaXNLZXk7XG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXG4gICAgICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBvYmpba2V5XTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwidW5kZWZpbmVkXCIgfHwga2V5Lmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgdmFsID09PSBcInVuZGVmaW5lZFwiIHx8IHZhbC5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICB0aGlzS2V5ID0ga2V5UHJlZml4ID8ga2V5UHJlZml4ICsgXCIuXCIgKyBrZXkgOiBrZXk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICB0aGlzS2V5ID0ga2V5UHJlZml4ID8ga2V5UHJlZml4ICsgXCJbXCIgKyBrZXkgKyBcIl1cIiA6IGtleTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCh0eXBlb2YgdmFsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IGJhYmVsSGVscGVycy50eXBlb2YodmFsKSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgc2Vncy5wdXNoKEFyZy5zdHJpbmdpZnkodmFsLCB0aGlzS2V5KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWdzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHRoaXNLZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZWdzLmpvaW4oXCImXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG9iaik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIFVSTCB3aXRoIHRoZSBnaXZlbiBwYXJhbWV0ZXJzLlxuICAgICAqIChvYmplY3QpID0gQSBVUkwgdG8gdGhlIGN1cnJlbnQgcGFnZSB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVycy5cbiAgICAgKiAocGF0aCwgb2JqZWN0KSA9IEEgVVJMIHRvIHRoZSBzcGVjaWZpZWQgcGF0aCwgd2l0aCB0aGUgb2JqZWN0IG9mIHBhcmFtZXRlcnMuXG4gICAgICogKHBhdGgsIG9iamVjdCwgb2JqZWN0KSA9IEEgVVJMIHRvIHRoZSBzcGVjaWZpZWQgcGF0aCB3aXRoIHRoZSBmaXJzdCBvYmplY3QgYXMgcXVlcnkgcGFyYW1ldGVycyxcbiAgICAgKiBhbmQgdGhlIHNlY29uZCBvYmplY3QgYXMgaGFzaCBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIEFyZy51cmwgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciBzZXAgPSBBcmcudXJsVXNlSGFzaCA/IEFyZy5oYXNoUXVlcnlTZXBlcmF0b3IgOiBBcmcucXVlcnlTZXBlcmF0b3I7XG4gICAgICB2YXIgc2VncyA9IFtsb2NhdGlvbi5wYXRobmFtZSwgc2VwXTtcbiAgICAgIHZhciBhcmdzID0ge307XG5cbiAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgLy8gQXJnLnVybChwYXJhbXMpXG4gICAgICAgICAgc2Vncy5wdXNoKEFyZy5zdHJpbmdpZnkoYXJndW1lbnRzWzBdKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAvLyBBcmcudXJsKHBhdGgsIHBhcmFtcylcbiAgICAgICAgICBzZWdzWzBdID0gQXJnLl9jbGVhblBhdGgoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICBhcmdzID0gQXJnLnBhcnNlKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgYXJncyA9IEFyZy5tZXJnZShhcmdzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICAgIHNlZ3MucHVzaChBcmcuc3RyaW5naWZ5KGFyZ3MpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIC8vIEFyZy51cmwocGF0aCwgcXVlcnksIGhhc2gpXG4gICAgICAgICAgc2Vnc1swXSA9IEFyZy5fY2xlYW5QYXRoKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgc2Vnc1sxXSA9IEFyZy5xdWVyeVNlcGVyYXRvcjtcbiAgICAgICAgICBzZWdzLnB1c2goQXJnLnN0cmluZ2lmeShhcmd1bWVudHNbMV0pKTtcbiAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzJdID09PSBcInN0cmluZ1wiID8gc2Vncy5wdXNoKEFyZy5oYXNoU2VwZXJhdG9yKSA6IHNlZ3MucHVzaChBcmcuaGFzaFF1ZXJ5U2VwZXJhdG9yKTtcbiAgICAgICAgICBzZWdzLnB1c2goQXJnLnN0cmluZ2lmeShhcmd1bWVudHNbMl0pKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHMgPSBzZWdzLmpvaW4oXCJcIik7XG5cbiAgICAgIC8vIHRyaW0gb2ZmIHNlcCBpZiBpdCdzIHRoZSBsYXN0IHRoaW5nXG4gICAgICBpZiAocy5pbmRleE9mKHNlcCkgPT0gcy5sZW5ndGggLSBzZXAubGVuZ3RoKSB7XG4gICAgICAgIHMgPSBzLnN1YnN0cigwLCBzLmxlbmd0aCAtIHNlcC5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcztcbiAgICB9O1xuXG4gICAgLyoqIHVybFVzZUhhc2ggdGVsbHMgdGhlIEFyZy51cmwgbWV0aG9kIHRvIGFsd2F5cyBwdXQgdGhlIHBhcmFtZXRlcnMgaW4gdGhlIGhhc2guICovXG4gICAgQXJnLnVybFVzZUhhc2ggPSBmYWxzZTtcblxuICAgIC8qKiBUaGUgc3RyaW5nIHRoYXQgc2VwZXJhdGVzIHRoZSBwYXRoIGFuZCBxdWVyeSBwYXJhbWV0ZXJzLiAqL1xuICAgIEFyZy5xdWVyeVNlcGVyYXRvciA9IFwiP1wiO1xuXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBzZXBlcmF0ZXMgdGhlIHBhdGggb3IgcXVlcnksIGFuZCB0aGUgaGFzaCBwcm9wZXJ0eS4gKi9cbiAgICBBcmcuaGFzaFNlcGVyYXRvciA9IFwiI1wiO1xuXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBzZXBlcmF0ZXMgdGhlIHRoZSBwYXRoIG9yIHF1ZXJ5LCBhbmQgdGhlIGhhc2ggcXVlcnkgcGFyYW1ldGVycy4gKi9cbiAgICBBcmcuaGFzaFF1ZXJ5U2VwZXJhdG9yID0gXCIjP1wiO1xuXG4gICAgLyoqIFdoZW4gcGFyc2luZyB2YWx1ZXMgaWYgdGhleSBzaG91bGQgYmUgY29lcmNlZCBpbnRvIHByaW1pdGl2ZSB0eXBlcywgaWUgTnVtYmVyLCBCb29sZWFuLCBVbmRlZmluZWQgKi9cbiAgICBBcmcuY29lcmNlTW9kZSA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBwYXJhbWV0ZXJzIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxuICAgICAqL1xuICAgIEFyZy5hbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWVyZ2VkID0gQXJnLnBhcnNlKEFyZy5xdWVyeXN0cmluZygpICsgXCImXCIgKyBBcmcuaGFzaHN0cmluZygpKTtcbiAgICAgIHJldHVybiBBcmcuX2FsbCA/IEFyZy5fYWxsIDogQXJnLl9hbGwgPSBtZXJnZWQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMLlxuICAgICAqL1xuICAgIEFyZy5nZXQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGRlZikge1xuICAgICAgdmFyIHZhbCA9IEFyZy5fYWNjZXNzKEFyZy5hbGwoKSwgc2VsZWN0b3IpO1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwidW5kZWZpbmVkXCIgPyBkZWYgOiB2YWw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxuICAgICAqL1xuICAgIEFyZy5xdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBBcmcuX3F1ZXJ5ID8gQXJnLl9xdWVyeSA6IEFyZy5fcXVlcnkgPSBBcmcucGFyc2UoQXJnLnF1ZXJ5c3RyaW5nKCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoYXNoIHN0cmluZyBwYXJhbWV0ZXJzIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxuICAgICAqL1xuICAgIEFyZy5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEFyZy5faGFzaCA/IEFyZy5faGFzaCA6IEFyZy5faGFzaCA9IEFyZy5wYXJzZShBcmcuaGFzaHN0cmluZygpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcXVlcnkgc3RyaW5nIGZyb20gdGhlIFVSTCAodGhlIHBhcnQgYWZ0ZXIgdGhlID8pLlxuICAgICAqL1xuICAgIEFyZy5xdWVyeXN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBBcmcuX2NsZWFuUGFyYW1TdHIobG9jYXRpb24uc2VhcmNoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaGFzaCBwYXJhbSBzdHJpbmcgZnJvbSB0aGUgVVJMICh0aGUgcGFydCBhZnRlciB0aGUgIykuXG4gICAgICovXG4gICAgQXJnLmhhc2hzdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gQXJnLl9jbGVhblBhcmFtU3RyKGxvY2F0aW9uLmhhc2gpO1xuICAgIH07XG5cbiAgICAvKlxuICAgICAqIENsZWFucyB0aGUgVVJMIHBhcmFtZXRlciBzdHJpbmcgc3RyaXBwaW5nICMgYW5kID8gZnJvbSB0aGUgYmVnaW5uaW5nLlxuICAgICAqL1xuICAgIEFyZy5fY2xlYW5QYXJhbVN0ciA9IGZ1bmN0aW9uIChzKSB7XG5cbiAgICAgIGlmIChzLmluZGV4T2YoQXJnLnF1ZXJ5U2VwZXJhdG9yKSA+IC0xKSBzID0gcy5zcGxpdChBcmcucXVlcnlTZXBlcmF0b3IpWzFdO1xuXG4gICAgICBpZiAocy5pbmRleE9mKEFyZy5oYXNoU2VwZXJhdG9yKSA+IC0xKSBzID0gcy5zcGxpdChBcmcuaGFzaFNlcGVyYXRvcilbMV07XG5cbiAgICAgIGlmIChzLmluZGV4T2YoXCI9XCIpID09PSAtMSAmJiBzLmluZGV4T2YoXCImXCIpID09PSAtMSkgcmV0dXJuIFwiXCI7XG5cbiAgICAgIHdoaWxlIChzLmluZGV4T2YoQXJnLmhhc2hTZXBlcmF0b3IpID09IDAgfHwgcy5pbmRleE9mKEFyZy5xdWVyeVNlcGVyYXRvcikgPT0gMCkge1xuICAgICAgICBzID0gcy5zdWJzdHIoMSk7XG4gICAgICB9cmV0dXJuIHM7XG4gICAgfTtcblxuICAgIEFyZy5fY2xlYW5QYXRoID0gZnVuY3Rpb24gKHApIHtcblxuICAgICAgaWYgKHAuaW5kZXhPZihBcmcucXVlcnlTZXBlcmF0b3IpID4gLTEpIHAgPSBwLnN1YnN0cigwLCBwLmluZGV4T2YoQXJnLnF1ZXJ5U2VwZXJhdG9yKSk7XG5cbiAgICAgIGlmIChwLmluZGV4T2YoQXJnLmhhc2hTZXBlcmF0b3IpID4gLTEpIHAgPSBwLnN1YnN0cigwLCBwLmluZGV4T2YoQXJnLmhhc2hTZXBlcmF0b3IpKTtcblxuICAgICAgcmV0dXJuIHA7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBhbGwgdGhlIGFyZ3VtZW50cyBpbnRvIGEgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICBBcmcubWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYWxsID0ge307XG4gICAgICBmb3IgKHZhciBhaSBpbiBhcmd1bWVudHMpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5oYXNPd25Qcm9wZXJ0eShhaSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBrIGluIGFyZ3VtZW50c1thaV0pIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHNbYWldLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgIGFsbFtrXSA9IGFyZ3VtZW50c1thaV1ba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYWxsO1xuICAgIH07XG4gICAgcmV0dXJuIEFyZztcbiAgfTtcblxuICAvKiogQG5hbWVzcGFjZVxuICAgKiBBcmcgaXMgdGhlIHJvb3QgbmFtZXNwYWNlIGZvciBhbGwgYXJnLmpzIGZ1bmN0aW9uYWxpdHkuXG4gICAqL1xuICBnbG9iYWwuQXJnID0gZ2xvYmFsLk1ha2VBcmcoKTtcbn0pKGdsb2JhbE9iaik7XG5cbnZhciBNYWtlQXJnID0gZ2xvYmFsT2JqLk1ha2VBcmc7XG5cbi8vID09Q2xvc3VyZUNvbXBpbGVyPT1cbi8vIEBjb21waWxhdGlvbl9sZXZlbCBBRFZBTkNFRF9PUFRJTUlaQVRJT05TXG4vLyBAZXh0ZXJuc191cmwgaHR0cDovL2Nsb3N1cmUtY29tcGlsZXIuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL2NvbnRyaWIvZXh0ZXJucy9tYXBzL2dvb2dsZV9tYXBzX2FwaV92M18zLmpzXG4vLyA9PS9DbG9zdXJlQ29tcGlsZXI9PVxuXG4vKipcbiAqIEBuYW1lIE1hcmtlckNsdXN0ZXJlciBmb3IgR29vZ2xlIE1hcHMgdjNcbiAqIEB2ZXJzaW9uIHZlcnNpb24gMS4wLjFcbiAqIEBhdXRob3IgTHVrZSBNYWhlXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBUaGUgbGlicmFyeSBjcmVhdGVzIGFuZCBtYW5hZ2VzIHBlci16b29tLWxldmVsIGNsdXN0ZXJzIGZvciBsYXJnZSBhbW91bnRzIG9mXG4gKiBtYXJrZXJzLlxuICogPGJyLz5cbiAqIFRoaXMgaXMgYSB2MyBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIDxhIGhyZWY9XCJodHRwOi8vZ21hcHMtdXRpbGl0eS1saWJyYXJ5LWRldi5nb29nbGVjb2RlLmNvbS9zdm4vdGFncy9tYXJrZXJjbHVzdGVyZXIvXCJcbiAqID52MiBNYXJrZXJDbHVzdGVyZXI8L2E+LlxuICovXG5cbi8qKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQSBNYXJrZXIgQ2x1c3RlcmVyIHRoYXQgY2x1c3RlcnMgbWFya2Vycy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcH0gbWFwIFRoZSBHb29nbGUgbWFwIHRvIGF0dGFjaCB0by5cbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj49fSBvcHRfbWFya2VycyBPcHRpb25hbCBtYXJrZXJzIHRvIGFkZCB0b1xuICogICB0aGUgY2x1c3Rlci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X29wdGlvbnMgc3VwcG9ydCB0aGUgZm9sbG93aW5nIG9wdGlvbnM6XG4gKiAgICAgJ2dyaWRTaXplJzogKG51bWJlcikgVGhlIGdyaWQgc2l6ZSBvZiBhIGNsdXN0ZXIgaW4gcGl4ZWxzLlxuICogICAgICdtYXhab29tJzogKG51bWJlcikgVGhlIG1heGltdW0gem9vbSBsZXZlbCB0aGF0IGEgbWFya2VyIGNhbiBiZSBwYXJ0IG9mIGFcbiAqICAgICAgICAgICAgICAgIGNsdXN0ZXIuXG4gKiAgICAgJ3pvb21PbkNsaWNrJzogKGJvb2xlYW4pIFdoZXRoZXIgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIG9mIGNsaWNraW5nIG9uIGFcbiAqICAgICAgICAgICAgICAgICAgICBjbHVzdGVyIGlzIHRvIHpvb20gaW50byBpdC5cbiAqICAgICAnYXZlcmFnZUNlbnRlcic6IChib29sZWFuKSBXZXRoZXIgdGhlIGNlbnRlciBvZiBlYWNoIGNsdXN0ZXIgc2hvdWxkIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICB0aGUgYXZlcmFnZSBvZiBhbGwgbWFya2VycyBpbiB0aGUgY2x1c3Rlci5cbiAqICAgICAnbWluaW11bUNsdXN0ZXJTaXplJzogKG51bWJlcikgVGhlIG1pbmltdW0gbnVtYmVyIG9mIG1hcmtlcnMgdG8gYmUgaW4gYVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyIGJlZm9yZSB0aGUgbWFya2VycyBhcmUgaGlkZGVuIGFuZCBhIGNvdW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIHNob3duLlxuICogICAgICdzdHlsZXMnOiAob2JqZWN0KSBBbiBvYmplY3QgdGhhdCBoYXMgc3R5bGUgcHJvcGVydGllczpcbiAqICAgICAgICd1cmwnOiAoc3RyaW5nKSBUaGUgaW1hZ2UgdXJsLlxuICogICAgICAgJ2hlaWdodCc6IChudW1iZXIpIFRoZSBpbWFnZSBoZWlnaHQuXG4gKiAgICAgICAnd2lkdGgnOiAobnVtYmVyKSBUaGUgaW1hZ2Ugd2lkdGguXG4gKiAgICAgICAnYW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBsYWJlbCB0ZXh0LlxuICogICAgICAgJ3RleHRDb2xvcic6IChzdHJpbmcpIFRoZSB0ZXh0IGNvbG9yLlxuICogICAgICAgJ3RleHRTaXplJzogKG51bWJlcikgVGhlIHRleHQgc2l6ZS5cbiAqICAgICAgICdiYWNrZ3JvdW5kUG9zaXRpb24nOiAoc3RyaW5nKSBUaGUgcG9zaXRpb24gb2YgdGhlIGJhY2tnb3VuZCB4LCB5LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBnb29nbGUubWFwcy5PdmVybGF5Vmlld1xuICovXG5mdW5jdGlvbiBNYXJrZXJDbHVzdGVyZXIobWFwLCBvcHRfbWFya2Vycywgb3B0X29wdGlvbnMpIHtcbiAgLy8gTWFya2VyQ2x1c3RlcmVyIGltcGxlbWVudHMgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcgaW50ZXJmYWNlLiBXZSB1c2UgdGhlXG4gIC8vIGV4dGVuZCBmdW5jdGlvbiB0byBleHRlbmQgTWFya2VyQ2x1c3RlcmVyIHdpdGggZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXdcbiAgLy8gYmVjYXVzZSBpdCBtaWdodCBub3QgYWx3YXlzIGJlIGF2YWlsYWJsZSB3aGVuIHRoZSBjb2RlIGlzIGRlZmluZWQgc28gd2VcbiAgLy8gbG9vayBmb3IgaXQgYXQgdGhlIGxhc3QgcG9zc2libGUgbW9tZW50LiBJZiBpdCBkb2Vzbid0IGV4aXN0IG5vdyB0aGVuXG4gIC8vIHRoZXJlIGlzIG5vIHBvaW50IGdvaW5nIGFoZWFkIDopXG4gIHRoaXMuZXh0ZW5kKE1hcmtlckNsdXN0ZXJlciwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMubWFya2Vyc18gPSBbXTtcblxuICAvKipcbiAgICogIEB0eXBlIHtBcnJheS48Q2x1c3Rlcj59XG4gICAqL1xuICB0aGlzLmNsdXN0ZXJzXyA9IFtdO1xuXG4gIHRoaXMuc2l6ZXMgPSBbNTMsIDU2LCA2NiwgNzgsIDkwXTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc3R5bGVzXyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucmVhZHlfID0gZmFsc2U7XG5cbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuZ3JpZFNpemVfID0gb3B0aW9uc1snZ3JpZFNpemUnXSB8fCA2MDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMubWluQ2x1c3RlclNpemVfID0gb3B0aW9uc1snbWluaW11bUNsdXN0ZXJTaXplJ10gfHwgMjtcblxuICAvKipcbiAgICogQHR5cGUgez9udW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1heFpvb21fID0gb3B0aW9uc1snbWF4Wm9vbSddIHx8IG51bGw7XG5cbiAgdGhpcy5zdHlsZXNfID0gb3B0aW9uc1snc3R5bGVzJ10gfHwgW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmltYWdlUGF0aF8gPSBvcHRpb25zWydpbWFnZVBhdGgnXSB8fCB0aGlzLk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5pbWFnZUV4dGVuc2lvbl8gPSBvcHRpb25zWydpbWFnZUV4dGVuc2lvbiddIHx8IHRoaXMuTUFSS0VSX0NMVVNURVJfSU1BR0VfRVhURU5TSU9OXztcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnpvb21PbkNsaWNrXyA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnNbJ3pvb21PbkNsaWNrJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy56b29tT25DbGlja18gPSBvcHRpb25zWyd6b29tT25DbGljayddO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zWydhdmVyYWdlQ2VudGVyJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IG9wdGlvbnNbJ2F2ZXJhZ2VDZW50ZXInXTtcbiAgfVxuXG4gIHRoaXMuc2V0dXBTdHlsZXNfKCk7XG5cbiAgdGhpcy5zZXRNYXAobWFwKTtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucHJldlpvb21fID0gdGhpcy5tYXBfLmdldFpvb20oKTtcblxuICAvLyBBZGQgdGhlIG1hcCBldmVudCBsaXN0ZW5lcnNcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcF8sICd6b29tX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gRGV0ZXJtaW5lcyBtYXAgdHlwZSBhbmQgcHJldmVudCBpbGxlZ2FsIHpvb20gbGV2ZWxzXG4gICAgdmFyIHpvb20gPSB0aGF0Lm1hcF8uZ2V0Wm9vbSgpO1xuICAgIHZhciBtaW5ab29tID0gdGhhdC5tYXBfLm1pblpvb20gfHwgMDtcbiAgICB2YXIgbWF4Wm9vbSA9IE1hdGgubWluKHRoYXQubWFwXy5tYXhab29tIHx8IDEwMCwgdGhhdC5tYXBfLm1hcFR5cGVzW3RoYXQubWFwXy5nZXRNYXBUeXBlSWQoKV0ubWF4Wm9vbSk7XG4gICAgem9vbSA9IE1hdGgubWluKE1hdGgubWF4KHpvb20sIG1pblpvb20pLCBtYXhab29tKTtcblxuICAgIGlmICh0aGF0LnByZXZab29tXyAhPSB6b29tKSB7XG4gICAgICB0aGF0LnByZXZab29tXyA9IHpvb207XG4gICAgICB0aGF0LnJlc2V0Vmlld3BvcnQoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwXywgJ2lkbGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhhdC5yZWRyYXcoKTtcbiAgfSk7XG5cbiAgLy8gRmluYWxseSwgYWRkIHRoZSBtYXJrZXJzXG4gIGlmIChvcHRfbWFya2VycyAmJiAob3B0X21hcmtlcnMubGVuZ3RoIHx8IE9iamVjdC5rZXlzKG9wdF9tYXJrZXJzKS5sZW5ndGgpKSB7XG4gICAgdGhpcy5hZGRNYXJrZXJzKG9wdF9tYXJrZXJzLCBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbWFya2VyIGNsdXN0ZXIgaW1hZ2UgcGF0aC5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5NQVJLRVJfQ0xVU1RFUl9JTUFHRV9QQVRIXyA9ICdodHRwOi8vZ29vZ2xlLW1hcHMtdXRpbGl0eS1saWJyYXJ5LXYzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9tYXJrZXJjbHVzdGVyZXIvJyArICdpbWFnZXMvbSc7XG5cbi8qKlxuICogVGhlIG1hcmtlciBjbHVzdGVyIGltYWdlIHBhdGguXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuTUFSS0VSX0NMVVNURVJfSU1BR0VfRVhURU5TSU9OXyA9ICdwbmcnO1xuXG4vKipcbiAqIEV4dGVuZHMgYSBvYmplY3RzIHByb3RvdHlwZSBieSBhbm90aGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkLlxuICogQHBhcmFtIHtPYmplY3R9IG9iajIgVGhlIG9iamVjdCB0byBleHRlbmQgd2l0aC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBleHRlbmRlZCBvYmplY3QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKG9iajEsIG9iajIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QucHJvdG90eXBlKSB7XG4gICAgICB0aGlzLnByb3RvdHlwZVtwcm9wZXJ0eV0gPSBvYmplY3QucHJvdG90eXBlW3Byb3BlcnR5XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0uYXBwbHkob2JqMSwgW29iajJdKTtcbn07XG5cbi8qKlxuICogSW1wbGVtZW50YWlvbiBvZiB0aGUgaW50ZXJmYWNlIG1ldGhvZC5cbiAqIEBpZ25vcmVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zZXRSZWFkeV8odHJ1ZSk7XG59O1xuXG4vKipcbiAqIEltcGxlbWVudGFpb24gb2YgdGhlIGludGVyZmFjZSBtZXRob2QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vKipcbiAqIFNldHMgdXAgdGhlIHN0eWxlcyBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXR1cFN0eWxlc18gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnN0eWxlc18ubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIHNpemU7IHNpemUgPSB0aGlzLnNpemVzW2ldOyBpKyspIHtcbiAgICB0aGlzLnN0eWxlc18ucHVzaCh7XG4gICAgICB1cmw6IHRoaXMuaW1hZ2VQYXRoXyArIChpICsgMSkgKyAnLicgKyB0aGlzLmltYWdlRXh0ZW5zaW9uXyxcbiAgICAgIGhlaWdodDogc2l6ZSxcbiAgICAgIHdpZHRoOiBzaXplXG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogIEZpdCB0aGUgbWFwIHRvIHRoZSBib3VuZHMgb2YgdGhlIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5maXRNYXBUb01hcmtlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXJrZXJzID0gdGhpcy5nZXRNYXJrZXJzKCk7XG4gIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgIGJvdW5kcy5leHRlbmQobWFya2VyLmdldFBvc2l0aW9uKCkpO1xuICB9XG5cbiAgdGhpcy5tYXBfLmZpdEJvdW5kcyhib3VuZHMpO1xufTtcblxuLyoqXG4gKiAgU2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcGFyYW0ge09iamVjdH0gc3R5bGVzIFRoZSBzdHlsZSB0byBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0U3R5bGVzID0gZnVuY3Rpb24gKHN0eWxlcykge1xuICB0aGlzLnN0eWxlc18gPSBzdHlsZXM7XG59O1xuXG4vKipcbiAqICBHZXRzIHRoZSBzdHlsZXMuXG4gKlxuICogIEByZXR1cm4ge09iamVjdH0gVGhlIHN0eWxlcyBvYmplY3QuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5zdHlsZXNfO1xufTtcblxuLyoqXG4gKiBXaGV0aGVyIHpvb20gb24gY2xpY2sgaXMgc2V0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgem9vbU9uQ2xpY2tfIGlzIHNldC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5pc1pvb21PbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy56b29tT25DbGlja187XG59O1xuXG4vKipcbiAqIFdoZXRoZXIgYXZlcmFnZSBjZW50ZXIgaXMgc2V0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYXZlcmFnZUNlbnRlcl8gaXMgc2V0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmlzQXZlcmFnZUNlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuYXZlcmFnZUNlbnRlcl87XG59O1xuXG4vKipcbiAqICBSZXR1cm5zIHRoZSBhcnJheSBvZiBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEByZXR1cm4ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBUaGUgbWFya2Vycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXJrZXJzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJzXztcbn07XG5cbi8qKlxuICogIFJldHVybnMgdGhlIG51bWJlciBvZiBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXJcbiAqXG4gKiAgQHJldHVybiB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIG1hcmtlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxNYXJrZXJzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJzXy5sZW5ndGg7XG59O1xuXG4vKipcbiAqICBTZXRzIHRoZSBtYXggem9vbSBmb3IgdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHBhcmFtIHtudW1iZXJ9IG1heFpvb20gVGhlIG1heCB6b29tIGxldmVsLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAobWF4Wm9vbSkge1xuICB0aGlzLm1heFpvb21fID0gbWF4Wm9vbTtcbn07XG5cbi8qKlxuICogIEdldHMgdGhlIG1heCB6b29tIGZvciB0aGUgY2x1c3RlcmVyLlxuICpcbiAqICBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXggem9vbSBsZXZlbC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXhab29tXztcbn07XG5cbi8qKlxuICogIFRoZSBmdW5jdGlvbiBmb3IgY2FsY3VsYXRpbmcgdGhlIGNsdXN0ZXIgaWNvbiBpbWFnZS5cbiAqXG4gKiAgQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gbWFya2VycyBUaGUgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICogIEBwYXJhbSB7bnVtYmVyfSBudW1TdHlsZXMgVGhlIG51bWJlciBvZiBzdHlsZXMgYXZhaWxhYmxlLlxuICogIEByZXR1cm4ge09iamVjdH0gQSBvYmplY3QgcHJvcGVydGllczogJ3RleHQnIChzdHJpbmcpIGFuZCAnaW5kZXgnIChudW1iZXIpLlxuICogIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2FsY3VsYXRvcl8gPSBmdW5jdGlvbiAobWFya2VycywgbnVtU3R5bGVzKSB7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBjb3VudCA9IG1hcmtlcnMubGVuZ3RoO1xuICB2YXIgZHYgPSBjb3VudDtcbiAgd2hpbGUgKGR2ICE9PSAwKSB7XG4gICAgZHYgPSBwYXJzZUludChkdiAvIDEwLCAxMCk7XG4gICAgaW5kZXgrKztcbiAgfVxuXG4gIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIG51bVN0eWxlcyk7XG4gIHJldHVybiB7XG4gICAgdGV4dDogY291bnQsXG4gICAgaW5kZXg6IGluZGV4XG4gIH07XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY2FsY3VsYXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKEFycmF5LCBudW1iZXIpfSBjYWxjdWxhdG9yIFRoZSBmdW5jdGlvbiB0byBzZXQgYXMgdGhlXG4gKiAgICAgY2FsY3VsYXRvci4gVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBvYmplY3QgcHJvcGVydGllczpcbiAqICAgICAndGV4dCcgKHN0cmluZykgYW5kICdpbmRleCcgKG51bWJlcikuXG4gKlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldENhbGN1bGF0b3IgPSBmdW5jdGlvbiAoY2FsY3VsYXRvcikge1xuICB0aGlzLmNhbGN1bGF0b3JfID0gY2FsY3VsYXRvcjtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjYWxjdWxhdG9yIGZ1bmN0aW9uLlxuICpcbiAqIEByZXR1cm4ge2Z1bmN0aW9uKEFycmF5LCBudW1iZXIpfSB0aGUgY2FsY3VsYXRvciBmdW5jdGlvbi5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRDYWxjdWxhdG9yID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5jYWxjdWxhdG9yXztcbn07XG5cbi8qKlxuICogQWRkIGFuIGFycmF5IG9mIG1hcmtlcnMgdG8gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIHRvIGFkZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgV2hldGhlciB0byByZWRyYXcgdGhlIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcnMgPSBmdW5jdGlvbiAobWFya2Vycywgb3B0X25vZHJhdykge1xuICBpZiAobWFya2Vycy5sZW5ndGgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgIHRoaXMucHVzaE1hcmtlclRvXyhtYXJrZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyhtYXJrZXJzKS5sZW5ndGgpIHtcbiAgICBmb3IgKHZhciBtYXJrZXIgaW4gbWFya2Vycykge1xuICAgICAgdGhpcy5wdXNoTWFya2VyVG9fKG1hcmtlcnNbbWFya2VyXSk7XG4gICAgfVxuICB9XG4gIGlmICghb3B0X25vZHJhdykge1xuICAgIHRoaXMucmVkcmF3KCk7XG4gIH1cbn07XG5cbi8qKlxuICogUHVzaGVzIGEgbWFya2VyIHRvIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucHVzaE1hcmtlclRvXyA9IGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgaWYgKG1hcmtlclsnZHJhZ2dhYmxlJ10pIHtcbiAgICAvLyBJZiB0aGUgbWFya2VyIGlzIGRyYWdnYWJsZSBhZGQgYSBsaXN0ZW5lciBzbyB3ZSB1cGRhdGUgdGhlIGNsdXN0ZXJzIG9uXG4gICAgLy8gdGhlIGRyYWcgZW5kLlxuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdkcmFnZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgICAgIHRoYXQucmVwYWludCgpO1xuICAgIH0pO1xuICB9XG4gIHRoaXMubWFya2Vyc18ucHVzaChtYXJrZXIpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgbWFya2VyIHRvIHRoZSBjbHVzdGVyZXIgYW5kIHJlZHJhd3MgaWYgbmVlZGVkLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9kcmF3IFdoZXRoZXIgdG8gcmVkcmF3IHRoZSBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRNYXJrZXIgPSBmdW5jdGlvbiAobWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gIHRoaXMucHVzaE1hcmtlclRvXyhtYXJrZXIpO1xuICBpZiAoIW9wdF9ub2RyYXcpIHtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBtYXJrZXIgYW5kIHJldHVybnMgdHJ1ZSBpZiByZW1vdmVkLCBmYWxzZSBpZiBub3RcbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gcmVtb3ZlXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBtYXJrZXIgd2FzIHJlbW92ZWQgb3Igbm90XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcl8gPSBmdW5jdGlvbiAobWFya2VyKSB7XG4gIHZhciBpbmRleCA9IC0xO1xuICBpZiAodGhpcy5tYXJrZXJzXy5pbmRleE9mKSB7XG4gICAgaW5kZXggPSB0aGlzLm1hcmtlcnNfLmluZGV4T2YobWFya2VyKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbTsgbSA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgaWYgKG0gPT0gbWFya2VyKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgLy8gTWFya2VyIGlzIG5vdCBpbiBvdXIgbGlzdCBvZiBtYXJrZXJzLlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIG1hcmtlci5zZXRNYXAobnVsbCk7XG5cbiAgdGhpcy5tYXJrZXJzXy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBtYXJrZXIgZnJvbSB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBPcHRpb25hbCBib29sZWFuIHRvIGZvcmNlIG5vIHJlZHJhdy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciB3YXMgcmVtb3ZlZC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXIgPSBmdW5jdGlvbiAobWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gIHZhciByZW1vdmVkID0gdGhpcy5yZW1vdmVNYXJrZXJfKG1hcmtlcik7XG5cbiAgaWYgKCFvcHRfbm9kcmF3ICYmIHJlbW92ZWQpIHtcbiAgICB0aGlzLnJlc2V0Vmlld3BvcnQoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmVzIGFuIGFycmF5IG9mIG1hcmtlcnMgZnJvbSB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIHRvIHJlbW92ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgT3B0aW9uYWwgYm9vbGVhbiB0byBmb3JjZSBubyByZWRyYXcuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2VycyA9IGZ1bmN0aW9uIChtYXJrZXJzLCBvcHRfbm9kcmF3KSB7XG4gIHZhciByZW1vdmVkID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgdmFyIHIgPSB0aGlzLnJlbW92ZU1hcmtlcl8obWFya2VyKTtcbiAgICByZW1vdmVkID0gcmVtb3ZlZCB8fCByO1xuICB9XG5cbiAgaWYgKCFvcHRfbm9kcmF3ICYmIHJlbW92ZWQpIHtcbiAgICB0aGlzLnJlc2V0Vmlld3BvcnQoKTtcbiAgICB0aGlzLnJlZHJhdygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGNsdXN0ZXJlcidzIHJlYWR5IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVhZHkgVGhlIHN0YXRlLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRSZWFkeV8gPSBmdW5jdGlvbiAocmVhZHkpIHtcbiAgaWYgKCF0aGlzLnJlYWR5Xykge1xuICAgIHRoaXMucmVhZHlfID0gcmVhZHk7XG4gICAgdGhpcy5jcmVhdGVDbHVzdGVyc18oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgY2x1c3RlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxDbHVzdGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuY2x1c3RlcnNfLmxlbmd0aDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZ29vZ2xlIG1hcCB0aGF0IHRoZSBjbHVzdGVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLk1hcH0gVGhlIG1hcC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1hcF87XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGdvb2dsZSBtYXAgdGhhdCB0aGUgY2x1c3RlcmVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcH0gbWFwIFRoZSBtYXAuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICB0aGlzLm1hcF8gPSBtYXA7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIGdyaWQuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldEdyaWRTaXplID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5ncmlkU2l6ZV87XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHNpemUgb2YgdGhlIGdyaWQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRHcmlkU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHRoaXMuZ3JpZFNpemVfID0gc2l6ZTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWluIGNsdXN0ZXIgc2l6ZS5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWluQ2x1c3RlclNpemUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbkNsdXN0ZXJTaXplXztcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgbWluIGNsdXN0ZXIgc2l6ZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1pbkNsdXN0ZXJTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBzaXplO1xufTtcblxuLyoqXG4gKiBFeHRlbmRzIGEgYm91bmRzIG9iamVjdCBieSB0aGUgZ3JpZCBzaXplLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSBib3VuZHMgVGhlIGJvdW5kcyB0byBleHRlbmQuXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IFRoZSBleHRlbmRlZCBib3VuZHMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0RXh0ZW5kZWRCb3VuZHMgPSBmdW5jdGlvbiAoYm91bmRzKSB7XG4gIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG5cbiAgLy8gVHVybiB0aGUgYm91bmRzIGludG8gbGF0bG5nLlxuICB2YXIgdHIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sYXQoKSwgYm91bmRzLmdldE5vcnRoRWFzdCgpLmxuZygpKTtcbiAgdmFyIGJsID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhib3VuZHMuZ2V0U291dGhXZXN0KCkubGF0KCksIGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcoKSk7XG5cbiAgLy8gQ29udmVydCB0aGUgcG9pbnRzIHRvIHBpeGVscyBhbmQgdGhlIGV4dGVuZCBvdXQgYnkgdGhlIGdyaWQgc2l6ZS5cbiAgdmFyIHRyUGl4ID0gcHJvamVjdGlvbi5mcm9tTGF0TG5nVG9EaXZQaXhlbCh0cik7XG4gIHRyUGl4LnggKz0gdGhpcy5ncmlkU2l6ZV87XG4gIHRyUGl4LnkgLT0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgdmFyIGJsUGl4ID0gcHJvamVjdGlvbi5mcm9tTGF0TG5nVG9EaXZQaXhlbChibCk7XG4gIGJsUGl4LnggLT0gdGhpcy5ncmlkU2l6ZV87XG4gIGJsUGl4LnkgKz0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgLy8gQ29udmVydCB0aGUgcGl4ZWwgcG9pbnRzIGJhY2sgdG8gTGF0TG5nXG4gIHZhciBuZSA9IHByb2plY3Rpb24uZnJvbURpdlBpeGVsVG9MYXRMbmcodHJQaXgpO1xuICB2YXIgc3cgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKGJsUGl4KTtcblxuICAvLyBFeHRlbmQgdGhlIGJvdW5kcyB0byBjb250YWluIHRoZSBuZXcgYm91bmRzLlxuICBib3VuZHMuZXh0ZW5kKG5lKTtcbiAgYm91bmRzLmV4dGVuZChzdyk7XG5cbiAgcmV0dXJuIGJvdW5kcztcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5zIGlmIGEgbWFya2VyIGlzIGNvbnRhaW5lZCBpbiBhIGJvdW5kcy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gYm91bmRzIFRoZSBib3VuZHMgdG8gY2hlY2sgYWdhaW5zdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciBpcyBpbiB0aGUgYm91bmRzLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5pc01hcmtlckluQm91bmRzXyA9IGZ1bmN0aW9uIChtYXJrZXIsIGJvdW5kcykge1xuICByZXR1cm4gYm91bmRzLmNvbnRhaW5zKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbn07XG5cbi8qKlxuICogQ2xlYXJzIGFsbCBjbHVzdGVycyBhbmQgbWFya2VycyBmcm9tIHRoZSBjbHVzdGVyZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2xlYXJNYXJrZXJzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlc2V0Vmlld3BvcnQodHJ1ZSk7XG5cbiAgLy8gU2V0IHRoZSBtYXJrZXJzIGEgZW1wdHkgYXJyYXkuXG4gIHRoaXMubWFya2Vyc18gPSBbXTtcbn07XG5cbi8qKlxuICogQ2xlYXJzIGFsbCBleGlzdGluZyBjbHVzdGVycyBhbmQgcmVjcmVhdGVzIHRoZW0uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF9oaWRlIFRvIGFsc28gaGlkZSB0aGUgbWFya2VyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlc2V0Vmlld3BvcnQgPSBmdW5jdGlvbiAob3B0X2hpZGUpIHtcbiAgLy8gUmVtb3ZlIGFsbCB0aGUgY2x1c3RlcnNcbiAgZm9yICh2YXIgaSA9IDAsIGNsdXN0ZXI7IGNsdXN0ZXIgPSB0aGlzLmNsdXN0ZXJzX1tpXTsgaSsrKSB7XG4gICAgY2x1c3Rlci5yZW1vdmUoKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBtYXJrZXJzIHRvIG5vdCBiZSBhZGRlZCBhbmQgdG8gYmUgaW52aXNpYmxlLlxuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICBtYXJrZXIuaXNBZGRlZCA9IGZhbHNlO1xuICAgIGlmIChvcHRfaGlkZSkge1xuICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmNsdXN0ZXJzXyA9IFtdO1xufTtcblxuLyoqXG4gKlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlcGFpbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvbGRDbHVzdGVycyA9IHRoaXMuY2x1c3RlcnNfLnNsaWNlKCk7XG4gIHRoaXMuY2x1c3RlcnNfLmxlbmd0aCA9IDA7XG4gIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICB0aGlzLnJlZHJhdygpO1xuXG4gIC8vIFJlbW92ZSB0aGUgb2xkIGNsdXN0ZXJzLlxuICAvLyBEbyBpdCBpbiBhIHRpbWVvdXQgc28gdGhlIG90aGVyIGNsdXN0ZXJzIGhhdmUgYmVlbiBkcmF3biBmaXJzdC5cbiAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBjbHVzdGVyOyBjbHVzdGVyID0gb2xkQ2x1c3RlcnNbaV07IGkrKykge1xuICAgICAgY2x1c3Rlci5yZW1vdmUoKTtcbiAgICB9XG4gIH0sIDApO1xufTtcblxuLyoqXG4gKiBSZWRyYXdzIHRoZSBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZWRyYXcgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY3JlYXRlQ2x1c3RlcnNfKCk7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIGxhdGxuZyBsb2NhdGlvbnMgaW4ga20uXG4gKiBAc2VlIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IHAxIFRoZSBmaXJzdCBsYXQgbG5nIHBvaW50LlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IHAyIFRoZSBzZWNvbmQgbGF0IGxuZyBwb2ludC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBwb2ludHMgaW4ga20uXG4gKiBAcHJpdmF0ZVxuKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyA9IGZ1bmN0aW9uIChwMSwgcDIpIHtcbiAgaWYgKCFwMSB8fCAhcDIpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBSID0gNjM3MTsgLy8gUmFkaXVzIG9mIHRoZSBFYXJ0aCBpbiBrbVxuICB2YXIgZExhdCA9IChwMi5sYXQoKSAtIHAxLmxhdCgpKSAqIE1hdGguUEkgLyAxODA7XG4gIHZhciBkTG9uID0gKHAyLmxuZygpIC0gcDEubG5nKCkpICogTWF0aC5QSSAvIDE4MDtcbiAgdmFyIGEgPSBNYXRoLnNpbihkTGF0IC8gMikgKiBNYXRoLnNpbihkTGF0IC8gMikgKyBNYXRoLmNvcyhwMS5sYXQoKSAqIE1hdGguUEkgLyAxODApICogTWF0aC5jb3MocDIubGF0KCkgKiBNYXRoLlBJIC8gMTgwKSAqIE1hdGguc2luKGRMb24gLyAyKSAqIE1hdGguc2luKGRMb24gLyAyKTtcbiAgdmFyIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xuICB2YXIgZCA9IFIgKiBjO1xuICByZXR1cm4gZDtcbn07XG5cbi8qKlxuICogQWRkIGEgbWFya2VyIHRvIGEgY2x1c3Rlciwgb3IgY3JlYXRlcyBhIG5ldyBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZFRvQ2xvc2VzdENsdXN0ZXJfID0gZnVuY3Rpb24gKG1hcmtlcikge1xuICB2YXIgZGlzdGFuY2UgPSA0MDAwMDsgLy8gU29tZSBsYXJnZSBudW1iZXJcbiAgdmFyIGNsdXN0ZXJUb0FkZFRvID0gbnVsbDtcbiAgdmFyIHBvcyA9IG1hcmtlci5nZXRQb3NpdGlvbigpO1xuICBmb3IgKHZhciBpID0gMCwgY2x1c3RlcjsgY2x1c3RlciA9IHRoaXMuY2x1c3RlcnNfW2ldOyBpKyspIHtcbiAgICB2YXIgY2VudGVyID0gY2x1c3Rlci5nZXRDZW50ZXIoKTtcbiAgICBpZiAoY2VudGVyKSB7XG4gICAgICB2YXIgZCA9IHRoaXMuZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyhjZW50ZXIsIG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgICAgIGlmIChkIDwgZGlzdGFuY2UpIHtcbiAgICAgICAgZGlzdGFuY2UgPSBkO1xuICAgICAgICBjbHVzdGVyVG9BZGRUbyA9IGNsdXN0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGNsdXN0ZXJUb0FkZFRvICYmIGNsdXN0ZXJUb0FkZFRvLmlzTWFya2VySW5DbHVzdGVyQm91bmRzKG1hcmtlcikpIHtcbiAgICBjbHVzdGVyVG9BZGRUby5hZGRNYXJrZXIobWFya2VyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY2x1c3RlciA9IG5ldyBDbHVzdGVyKHRoaXMpO1xuICAgIGNsdXN0ZXIuYWRkTWFya2VyKG1hcmtlcik7XG4gICAgdGhpcy5jbHVzdGVyc18ucHVzaChjbHVzdGVyKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBjbHVzdGVycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmNyZWF0ZUNsdXN0ZXJzXyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnJlYWR5Xykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdldCBvdXIgY3VycmVudCBtYXAgdmlldyBib3VuZHMuXG4gIC8vIENyZWF0ZSBhIG5ldyBib3VuZHMgb2JqZWN0IHNvIHdlIGRvbid0IGFmZmVjdCB0aGUgbWFwLlxuICB2YXIgbWFwQm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLm1hcF8uZ2V0Qm91bmRzKCkuZ2V0U291dGhXZXN0KCksIHRoaXMubWFwXy5nZXRCb3VuZHMoKS5nZXROb3J0aEVhc3QoKSk7XG4gIHZhciBib3VuZHMgPSB0aGlzLmdldEV4dGVuZGVkQm91bmRzKG1hcEJvdW5kcyk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgaWYgKCFtYXJrZXIuaXNBZGRlZCAmJiB0aGlzLmlzTWFya2VySW5Cb3VuZHNfKG1hcmtlciwgYm91bmRzKSkge1xuICAgICAgdGhpcy5hZGRUb0Nsb3Nlc3RDbHVzdGVyXyhtYXJrZXIpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBBIGNsdXN0ZXIgdGhhdCBjb250YWlucyBtYXJrZXJzLlxuICpcbiAqIEBwYXJhbSB7TWFya2VyQ2x1c3RlcmVyfSBtYXJrZXJDbHVzdGVyZXIgVGhlIG1hcmtlcmNsdXN0ZXJlciB0aGF0IHRoaXNcbiAqICAgICBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBDbHVzdGVyKG1hcmtlckNsdXN0ZXJlcikge1xuICB0aGlzLm1hcmtlckNsdXN0ZXJlcl8gPSBtYXJrZXJDbHVzdGVyZXI7XG4gIHRoaXMubWFwXyA9IG1hcmtlckNsdXN0ZXJlci5nZXRNYXAoKTtcbiAgdGhpcy5ncmlkU2l6ZV8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0R3JpZFNpemUoKTtcbiAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0TWluQ2x1c3RlclNpemUoKTtcbiAgdGhpcy5hdmVyYWdlQ2VudGVyXyA9IG1hcmtlckNsdXN0ZXJlci5pc0F2ZXJhZ2VDZW50ZXIoKTtcbiAgdGhpcy5jZW50ZXJfID0gbnVsbDtcbiAgdGhpcy5tYXJrZXJzXyA9IFtdO1xuICB0aGlzLmJvdW5kc18gPSBudWxsO1xuICB0aGlzLmNsdXN0ZXJJY29uXyA9IG5ldyBDbHVzdGVySWNvbih0aGlzLCBtYXJrZXJDbHVzdGVyZXIuZ2V0U3R5bGVzKCksIG1hcmtlckNsdXN0ZXJlci5nZXRHcmlkU2l6ZSgpKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbnMgaWYgYSBtYXJrZXIgaXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgaXMgYWxyZWFkeSBhZGRlZC5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuaXNNYXJrZXJBbHJlYWR5QWRkZWQgPSBmdW5jdGlvbiAobWFya2VyKSB7XG4gIGlmICh0aGlzLm1hcmtlcnNfLmluZGV4T2YpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzXy5pbmRleE9mKG1hcmtlcikgIT0gLTE7XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIG07IG0gPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgIGlmIChtID09IG1hcmtlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBtYXJrZXIgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciB3YXMgYWRkZWQuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmFkZE1hcmtlciA9IGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgaWYgKHRoaXMuaXNNYXJrZXJBbHJlYWR5QWRkZWQobWFya2VyKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghdGhpcy5jZW50ZXJfKSB7XG4gICAgdGhpcy5jZW50ZXJfID0gbWFya2VyLmdldFBvc2l0aW9uKCk7XG4gICAgdGhpcy5jYWxjdWxhdGVCb3VuZHNfKCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMuYXZlcmFnZUNlbnRlcl8pIHtcbiAgICAgIHZhciBsID0gdGhpcy5tYXJrZXJzXy5sZW5ndGggKyAxO1xuICAgICAgdmFyIGxhdCA9ICh0aGlzLmNlbnRlcl8ubGF0KCkgKiAobCAtIDEpICsgbWFya2VyLmdldFBvc2l0aW9uKCkubGF0KCkpIC8gbDtcbiAgICAgIHZhciBsbmcgPSAodGhpcy5jZW50ZXJfLmxuZygpICogKGwgLSAxKSArIG1hcmtlci5nZXRQb3NpdGlvbigpLmxuZygpKSAvIGw7XG4gICAgICB0aGlzLmNlbnRlcl8gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdCwgbG5nKTtcbiAgICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzXygpO1xuICAgIH1cbiAgfVxuXG4gIG1hcmtlci5pc0FkZGVkID0gdHJ1ZTtcbiAgdGhpcy5tYXJrZXJzXy5wdXNoKG1hcmtlcik7XG5cbiAgdmFyIGxlbiA9IHRoaXMubWFya2Vyc18ubGVuZ3RoO1xuICBpZiAobGVuIDwgdGhpcy5taW5DbHVzdGVyU2l6ZV8gJiYgbWFya2VyLmdldE1hcCgpICE9IHRoaXMubWFwXykge1xuICAgIC8vIE1pbiBjbHVzdGVyIHNpemUgbm90IHJlYWNoZWQgc28gc2hvdyB0aGUgbWFya2VyLlxuICAgIG1hcmtlci5zZXRNYXAodGhpcy5tYXBfKTtcbiAgfVxuXG4gIGlmIChsZW4gPT0gdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICAvLyBIaWRlIHRoZSBtYXJrZXJzIHRoYXQgd2VyZSBzaG93aW5nLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMubWFya2Vyc19baV0uc2V0TWFwKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsZW4gPj0gdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICB9XG5cbiAgdGhpcy51cGRhdGVJY29uKCk7XG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXJrZXIgY2x1c3RlcmVyIHRoYXQgdGhlIGNsdXN0ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge01hcmtlckNsdXN0ZXJlcn0gVGhlIGFzc29jaWF0ZWQgbWFya2VyIGNsdXN0ZXJlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0TWFya2VyQ2x1c3RlcmVyID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJDbHVzdGVyZXJfO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBib3VuZHMgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSB0aGUgY2x1c3RlciBib3VuZHMuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHModGhpcy5jZW50ZXJfLCB0aGlzLmNlbnRlcl8pO1xuICB2YXIgbWFya2VycyA9IHRoaXMuZ2V0TWFya2VycygpO1xuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgfVxuICByZXR1cm4gYm91bmRzO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBjbHVzdGVyXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jbHVzdGVySWNvbl8ucmVtb3ZlKCk7XG4gIHRoaXMubWFya2Vyc18ubGVuZ3RoID0gMDtcbiAgZGVsZXRlIHRoaXMubWFya2Vyc187XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGNlbnRlciBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc18ubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjZW50ZXIgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0TWFya2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc187XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGNlbnRlciBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmd9IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5jZW50ZXJfO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVkIHRoZSBleHRlbmRlZCBib3VuZHMgb2YgdGhlIGNsdXN0ZXIgd2l0aCB0aGUgZ3JpZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5jYWxjdWxhdGVCb3VuZHNfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLmNlbnRlcl8sIHRoaXMuY2VudGVyXyk7XG4gIHRoaXMuYm91bmRzXyA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRFeHRlbmRlZEJvdW5kcyhib3VuZHMpO1xufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgbWFya2VyIGxpZXMgaW4gdGhlIGNsdXN0ZXJzIGJvdW5kcy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgbGllcyBpbiB0aGUgYm91bmRzLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5pc01hcmtlckluQ2x1c3RlckJvdW5kcyA9IGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgcmV0dXJuIHRoaXMuYm91bmRzXy5jb250YWlucyhtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1hcCB0aGF0IHRoZSBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5NYXB9IFRoZSBtYXAuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWFwXztcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgY2x1c3RlciBpY29uXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLnVwZGF0ZUljb24gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB6b29tID0gdGhpcy5tYXBfLmdldFpvb20oKTtcbiAgdmFyIG16ID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldE1heFpvb20oKTtcblxuICBpZiAobXogJiYgem9vbSA+IG16KSB7XG4gICAgLy8gVGhlIHpvb20gaXMgZ3JlYXRlciB0aGFuIG91ciBtYXggem9vbSBzbyBzaG93IGFsbCB0aGUgbWFya2VycyBpbiBjbHVzdGVyLlxuICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgbWFya2VyLnNldE1hcCh0aGlzLm1hcF8pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5tYXJrZXJzXy5sZW5ndGggPCB0aGlzLm1pbkNsdXN0ZXJTaXplXykge1xuICAgIC8vIE1pbiBjbHVzdGVyIHNpemUgbm90IHlldCByZWFjaGVkLlxuICAgIHRoaXMuY2x1c3Rlckljb25fLmhpZGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbnVtU3R5bGVzID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldFN0eWxlcygpLmxlbmd0aDtcbiAgdmFyIHN1bXMgPSB0aGlzLm1hcmtlckNsdXN0ZXJlcl8uZ2V0Q2FsY3VsYXRvcigpKHRoaXMubWFya2Vyc18sIG51bVN0eWxlcyk7XG4gIHRoaXMuY2x1c3Rlckljb25fLnNldENlbnRlcih0aGlzLmNlbnRlcl8pO1xuICB0aGlzLmNsdXN0ZXJJY29uXy5zZXRTdW1zKHN1bXMpO1xuICB0aGlzLmNsdXN0ZXJJY29uXy5zaG93KCk7XG59O1xuXG4vKipcbiAqIEEgY2x1c3RlciBpY29uXG4gKlxuICogQHBhcmFtIHtDbHVzdGVyfSBjbHVzdGVyIFRoZSBjbHVzdGVyIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZXMgQW4gb2JqZWN0IHRoYXQgaGFzIHN0eWxlIHByb3BlcnRpZXM6XG4gKiAgICAgJ3VybCc6IChzdHJpbmcpIFRoZSBpbWFnZSB1cmwuXG4gKiAgICAgJ2hlaWdodCc6IChudW1iZXIpIFRoZSBpbWFnZSBoZWlnaHQuXG4gKiAgICAgJ3dpZHRoJzogKG51bWJlcikgVGhlIGltYWdlIHdpZHRoLlxuICogICAgICdhbmNob3InOiAoQXJyYXkpIFRoZSBhbmNob3IgcG9zaXRpb24gb2YgdGhlIGxhYmVsIHRleHQuXG4gKiAgICAgJ3RleHRDb2xvcic6IChzdHJpbmcpIFRoZSB0ZXh0IGNvbG9yLlxuICogICAgICd0ZXh0U2l6ZSc6IChudW1iZXIpIFRoZSB0ZXh0IHNpemUuXG4gKiAgICAgJ2JhY2tncm91bmRQb3NpdGlvbjogKHN0cmluZykgVGhlIGJhY2tncm91bmQgcG9zdGl0aW9uIHgsIHkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9wYWRkaW5nIE9wdGlvbmFsIHBhZGRpbmcgdG8gYXBwbHkgdG8gdGhlIGNsdXN0ZXIgaWNvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXdcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gQ2x1c3Rlckljb24oY2x1c3Rlciwgc3R5bGVzLCBvcHRfcGFkZGluZykge1xuICBjbHVzdGVyLmdldE1hcmtlckNsdXN0ZXJlcigpLmV4dGVuZChDbHVzdGVySWNvbiwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuXG4gIHRoaXMuc3R5bGVzXyA9IHN0eWxlcztcbiAgdGhpcy5wYWRkaW5nXyA9IG9wdF9wYWRkaW5nIHx8IDA7XG4gIHRoaXMuY2x1c3Rlcl8gPSBjbHVzdGVyO1xuICB0aGlzLmNlbnRlcl8gPSBudWxsO1xuICB0aGlzLm1hcF8gPSBjbHVzdGVyLmdldE1hcCgpO1xuICB0aGlzLmRpdl8gPSBudWxsO1xuICB0aGlzLnN1bXNfID0gbnVsbDtcbiAgdGhpcy52aXNpYmxlXyA9IGZhbHNlO1xuXG4gIHRoaXMuc2V0TWFwKHRoaXMubWFwXyk7XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNsdXN0ZXJjbGljayBldmVudCBhbmQgem9vbSdzIGlmIHRoZSBvcHRpb24gaXMgc2V0LlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUudHJpZ2dlckNsdXN0ZXJDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hcmtlckNsdXN0ZXJlciA9IHRoaXMuY2x1c3Rlcl8uZ2V0TWFya2VyQ2x1c3RlcmVyKCk7XG5cbiAgLy8gVHJpZ2dlciB0aGUgY2x1c3RlcmNsaWNrIGV2ZW50LlxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG1hcmtlckNsdXN0ZXJlciwgJ2NsdXN0ZXJjbGljaycsIHRoaXMuY2x1c3Rlcl8pO1xuXG4gIGlmIChtYXJrZXJDbHVzdGVyZXIuaXNab29tT25DbGljaygpKSB7XG4gICAgLy8gWm9vbSBpbnRvIHRoZSBjbHVzdGVyLlxuICAgIHRoaXMubWFwXy5maXRCb3VuZHModGhpcy5jbHVzdGVyXy5nZXRCb3VuZHMoKSk7XG4gIH1cbn07XG5cbi8qKlxuICogQWRkaW5nIHRoZSBjbHVzdGVyIGljb24gdG8gdGhlIGRvbS5cbiAqIEBpZ25vcmVcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmRpdl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgaWYgKHRoaXMudmlzaWJsZV8pIHtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5jcmVhdGVDc3MocG9zKTtcbiAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5zdW1zXy50ZXh0O1xuICB9XG5cbiAgdmFyIHBhbmVzID0gdGhpcy5nZXRQYW5lcygpO1xuICBwYW5lcy5vdmVybGF5TW91c2VUYXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5kaXZfKTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZGl2XywgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIHRoYXQudHJpZ2dlckNsdXN0ZXJDbGljaygpO1xuICB9KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zaXRpb24gdG8gcGxhY2UgdGhlIGRpdiBkZW5kaW5nIG9uIHRoZSBsYXRsbmcuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IGxhdGxuZyBUaGUgcG9zaXRpb24gaW4gbGF0bG5nLlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuUG9pbnR9IFRoZSBwb3NpdGlvbiBpbiBwaXhlbHMuXG4gKiBAcHJpdmF0ZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuZ2V0UG9zRnJvbUxhdExuZ18gPSBmdW5jdGlvbiAobGF0bG5nKSB7XG4gIHZhciBwb3MgPSB0aGlzLmdldFByb2plY3Rpb24oKS5mcm9tTGF0TG5nVG9EaXZQaXhlbChsYXRsbmcpO1xuICBwb3MueCAtPSBwYXJzZUludCh0aGlzLndpZHRoXyAvIDIsIDEwKTtcbiAgcG9zLnkgLT0gcGFyc2VJbnQodGhpcy5oZWlnaHRfIC8gMiwgMTApO1xuICByZXR1cm4gcG9zO1xufTtcblxuLyoqXG4gKiBEcmF3IHRoZSBpY29uLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMudmlzaWJsZV8pIHtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS50b3AgPSBwb3MueSArICdweCc7XG4gICAgdGhpcy5kaXZfLnN0eWxlLmxlZnQgPSBwb3MueCArICdweCc7XG4gIH1cbn07XG5cbi8qKlxuICogSGlkZSB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB0aGlzLmRpdl8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIFBvc2l0aW9uIGFuZCBzaG93IHRoZSBpY29uLlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuZGl2Xykge1xuICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc0Zyb21MYXRMbmdfKHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5kaXZfLnN0eWxlLmNzc1RleHQgPSB0aGlzLmNyZWF0ZUNzcyhwb3MpO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gIH1cbiAgdGhpcy52aXNpYmxlXyA9IHRydWU7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgaWNvbiBmcm9tIHRoZSBtYXBcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zZXRNYXAobnVsbCk7XG59O1xuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBvblJlbW92ZSBpbnRlcmZhY2UuXG4gKiBAaWdub3JlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuZGl2XyAmJiB0aGlzLmRpdl8ucGFyZW50Tm9kZSkge1xuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMuZGl2Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGl2Xyk7XG4gICAgdGhpcy5kaXZfID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgdGhlIHN1bXMgb2YgdGhlIGljb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHN1bXMgVGhlIHN1bXMgY29udGFpbmluZzpcbiAqICAgJ3RleHQnOiAoc3RyaW5nKSBUaGUgdGV4dCB0byBkaXNwbGF5IGluIHRoZSBpY29uLlxuICogICAnaW5kZXgnOiAobnVtYmVyKSBUaGUgc3R5bGUgaW5kZXggb2YgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5zZXRTdW1zID0gZnVuY3Rpb24gKHN1bXMpIHtcbiAgdGhpcy5zdW1zXyA9IHN1bXM7XG4gIHRoaXMudGV4dF8gPSBzdW1zLnRleHQ7XG4gIHRoaXMuaW5kZXhfID0gc3Vtcy5pbmRleDtcbiAgaWYgKHRoaXMuZGl2Xykge1xuICAgIHRoaXMuZGl2Xy5pbm5lckhUTUwgPSBzdW1zLnRleHQ7XG4gIH1cblxuICB0aGlzLnVzZVN0eWxlKCk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGljb24gdG8gdGhlIHRoZSBzdHlsZXMuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS51c2VTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGluZGV4ID0gTWF0aC5tYXgoMCwgdGhpcy5zdW1zXy5pbmRleCAtIDEpO1xuICBpbmRleCA9IE1hdGgubWluKHRoaXMuc3R5bGVzXy5sZW5ndGggLSAxLCBpbmRleCk7XG4gIHZhciBzdHlsZSA9IHRoaXMuc3R5bGVzX1tpbmRleF07XG4gIHRoaXMudXJsXyA9IHN0eWxlWyd1cmwnXTtcbiAgdGhpcy5oZWlnaHRfID0gc3R5bGVbJ2hlaWdodCddO1xuICB0aGlzLndpZHRoXyA9IHN0eWxlWyd3aWR0aCddO1xuICB0aGlzLnRleHRDb2xvcl8gPSBzdHlsZVsndGV4dENvbG9yJ107XG4gIHRoaXMuYW5jaG9yXyA9IHN0eWxlWydhbmNob3InXTtcbiAgdGhpcy50ZXh0U2l6ZV8gPSBzdHlsZVsndGV4dFNpemUnXTtcbiAgdGhpcy5iYWNrZ3JvdW5kUG9zaXRpb25fID0gc3R5bGVbJ2JhY2tncm91bmRQb3NpdGlvbiddO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjZW50ZXIgb2YgdGhlIGljb24uXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IGNlbnRlciBUaGUgbGF0bG5nIHRvIHNldCBhcyB0aGUgY2VudGVyLlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gKGNlbnRlcikge1xuICB0aGlzLmNlbnRlcl8gPSBjZW50ZXI7XG59O1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgY3NzIHRleHQgYmFzZWQgb24gdGhlIHBvc2l0aW9uIG9mIHRoZSBpY29uLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuUG9pbnR9IHBvcyBUaGUgcG9zaXRpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjc3Mgc3R5bGUgdGV4dC5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmNyZWF0ZUNzcyA9IGZ1bmN0aW9uIChwb3MpIHtcbiAgdmFyIHN0eWxlID0gW107XG4gIHN0eWxlLnB1c2goJ2JhY2tncm91bmQtaW1hZ2U6dXJsKCcgKyB0aGlzLnVybF8gKyAnKTsnKTtcbiAgdmFyIGJhY2tncm91bmRQb3NpdGlvbiA9IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA/IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA6ICcwIDAnO1xuICBzdHlsZS5wdXNoKCdiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKyBiYWNrZ3JvdW5kUG9zaXRpb24gKyAnOycpO1xuXG4gIGlmIChiYWJlbEhlbHBlcnMudHlwZW9mKHRoaXMuYW5jaG9yXykgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMF0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1swXSA+IDAgJiYgdGhpcy5hbmNob3JfWzBdIDwgdGhpcy5oZWlnaHRfKSB7XG4gICAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArICh0aGlzLmhlaWdodF8gLSB0aGlzLmFuY2hvcl9bMF0pICsgJ3B4OyBwYWRkaW5nLXRvcDonICsgdGhpcy5hbmNob3JfWzBdICsgJ3B4OycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArICdweDsgbGluZS1oZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArICdweDsnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMV0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1sxXSA+IDAgJiYgdGhpcy5hbmNob3JfWzFdIDwgdGhpcy53aWR0aF8pIHtcbiAgICAgIHN0eWxlLnB1c2goJ3dpZHRoOicgKyAodGhpcy53aWR0aF8gLSB0aGlzLmFuY2hvcl9bMV0pICsgJ3B4OyBwYWRkaW5nLWxlZnQ6JyArIHRoaXMuYW5jaG9yX1sxXSArICdweDsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUucHVzaCgnd2lkdGg6JyArIHRoaXMud2lkdGhfICsgJ3B4OyB0ZXh0LWFsaWduOmNlbnRlcjsnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gKyAncHg7IGxpbmUtaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gKyAncHg7IHdpZHRoOicgKyB0aGlzLndpZHRoXyArICdweDsgdGV4dC1hbGlnbjpjZW50ZXI7Jyk7XG4gIH1cblxuICB2YXIgdHh0Q29sb3IgPSB0aGlzLnRleHRDb2xvcl8gPyB0aGlzLnRleHRDb2xvcl8gOiAnYmxhY2snO1xuICB2YXIgdHh0U2l6ZSA9IHRoaXMudGV4dFNpemVfID8gdGhpcy50ZXh0U2l6ZV8gOiAxMTtcblxuICBzdHlsZS5wdXNoKCdjdXJzb3I6cG9pbnRlcjsgdG9wOicgKyBwb3MueSArICdweDsgbGVmdDonICsgcG9zLnggKyAncHg7IGNvbG9yOicgKyB0eHRDb2xvciArICc7IHBvc2l0aW9uOmFic29sdXRlOyBmb250LXNpemU6JyArIHR4dFNpemUgKyAncHg7IGZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OmJvbGQnKTtcbiAgcmV0dXJuIHN0eWxlLmpvaW4oJycpO1xufTtcblxuLy8gRXhwb3J0IFN5bWJvbHMgZm9yIENsb3N1cmVcbi8vIElmIHlvdSBhcmUgbm90IGdvaW5nIHRvIGNvbXBpbGUgd2l0aCBjbG9zdXJlIHRoZW4geW91IGNhbiByZW1vdmUgdGhlXG4vLyBjb2RlIGJlbG93Llxud2luZG93WydNYXJrZXJDbHVzdGVyZXInXSA9IE1hcmtlckNsdXN0ZXJlcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2FkZE1hcmtlciddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRNYXJrZXI7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydhZGRNYXJrZXJzJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcnM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydjbGVhck1hcmtlcnMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2xlYXJNYXJrZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZml0TWFwVG9NYXJrZXJzJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmZpdE1hcFRvTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldENhbGN1bGF0b3InXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRvcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldEdyaWRTaXplJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldEdyaWRTaXplO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0RXh0ZW5kZWRCb3VuZHMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0RXh0ZW5kZWRCb3VuZHM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydnZXRNYXAnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWFwO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0TWFya2VycyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXJrZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0TWF4Wm9vbSddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXhab29tO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0U3R5bGVzJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFN0eWxlcztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldFRvdGFsQ2x1c3RlcnMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxDbHVzdGVycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldFRvdGFsTWFya2VycyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbE1hcmtlcnM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydyZWRyYXcnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVkcmF3O1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsncmVtb3ZlTWFya2VyJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3JlbW92ZU1hcmtlcnMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3Jlc2V0Vmlld3BvcnQnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVzZXRWaWV3cG9ydDtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3JlcGFpbnQnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVwYWludDtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3NldENhbGN1bGF0b3InXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0Q2FsY3VsYXRvcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3NldEdyaWRTaXplJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldEdyaWRTaXplO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnc2V0TWF4Wm9vbSddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXhab29tO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnb25BZGQnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUub25BZGQ7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydkcmF3J10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRyYXc7XG5cbkNsdXN0ZXIucHJvdG90eXBlWydnZXRDZW50ZXInXSA9IENsdXN0ZXIucHJvdG90eXBlLmdldENlbnRlcjtcbkNsdXN0ZXIucHJvdG90eXBlWydnZXRTaXplJ10gPSBDbHVzdGVyLnByb3RvdHlwZS5nZXRTaXplO1xuQ2x1c3Rlci5wcm90b3R5cGVbJ2dldE1hcmtlcnMnXSA9IENsdXN0ZXIucHJvdG90eXBlLmdldE1hcmtlcnM7XG5cbkNsdXN0ZXJJY29uLnByb3RvdHlwZVsnb25BZGQnXSA9IENsdXN0ZXJJY29uLnByb3RvdHlwZS5vbkFkZDtcbkNsdXN0ZXJJY29uLnByb3RvdHlwZVsnZHJhdyddID0gQ2x1c3Rlckljb24ucHJvdG90eXBlLmRyYXc7XG5DbHVzdGVySWNvbi5wcm90b3R5cGVbJ29uUmVtb3ZlJ10gPSBDbHVzdGVySWNvbi5wcm90b3R5cGUub25SZW1vdmU7XG5cbk9iamVjdC5rZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG8pIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBuYW1lIGluIG8pIHtcbiAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgcmVzdWx0LnB1c2gobmFtZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBNYXBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNYXBDb250cm9sbGVyKHRhcmdldFNlbGVjdG9yKSB7XG4gICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIE1hcENvbnRyb2xsZXIpO1xuXG4gICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgdGhpcy5tYXAgPSB0aGlzLmluaXRNYXAodGFyZ2V0U2VsZWN0b3IpO1xuICB9XG5cbiAgYmFiZWxIZWxwZXJzLmNyZWF0ZUNsYXNzKE1hcENvbnRyb2xsZXIsIFt7XG4gICAga2V5OiAnaW5pdE1hcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRNYXAodGFyZ2V0U2VsZWN0b3IpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxuICAgICAgICB6b29tOiAxNCxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICBtYXhab29tOiAxN1xuICAgICAgfTtcblxuICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3RvciksIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjcmVhdGVSYW5kb21NYXJrZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmFuZG9tTWFya2VycygpIHtcbiAgICAgIHZhciBhbW91bnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyA1IDogYXJndW1lbnRzWzBdO1xuICAgICAgdmFyIG1hcCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRoaXMubWFwIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgbG5nU3BhbiA9IDAuMTc7XG4gICAgICB2YXIgbGF0U3BhbiA9IDAuMDM7XG4gICAgICB2YXIgbXlMYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDUxLjUwMDUyNCwgLTAuMTc2OTE0Nyk7XG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xuXG4gICAgICBpZiAobWFwID09PSB0aGlzLm1hcCkge1xuICAgICAgICB0aGlzLmNsZWFyQWxsTWFya2Vycyh0aGlzLm1hcmtlcnMpO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgc29tZSBtYXJrZXJzXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFtb3VudDsgaSsrKSB7XG4gICAgICAgIHZhciBsb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobXlMYXRMbmcubGF0KCkgLSBsYXRTcGFuIC8gMiArIGxhdFNwYW4gKiBNYXRoLnJhbmRvbSgpLCBteUxhdExuZy5sbmcoKSAtIGxuZ1NwYW4gLyAyICsgbG5nU3BhbiAqIE1hdGgucmFuZG9tKCkpO1xuXG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgbWFwOiBtYXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3JlYXRlQ2x1c3RlcihtYXJrZXJzLCBtYXApO1xuICAgICAgdGhpcy5jZW50ZXJPbk1hcmtlcnMobWFya2VycywgbWFwKTtcbiAgICAgIHJldHVybiBtYXJrZXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgY3JlYXRlTWFya2Vyc0Zyb21Db29yZGluYXRlc1xuICAgICAqIEBwYXJhbSAge0FycmF5fSBjb29yZGluYXRlcyBFYWNoIGVsZW1lbnQgbXVzdCBoYXZlIGEgbGF0aXR1ZGUgYW5kIGEgbG9uZ2l0dWRlXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBtYXAgICBHb29nbGUgTWFwcyBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheVtPYmplY3RdfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjcmVhdGVNYXJrZXJzRnJvbUNvb3JkaW5hdGVzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWFya2Vyc0Zyb21Db29yZGluYXRlcyhjb29yZGluYXRlcykge1xuICAgICAgdmFyIG1hcCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRoaXMubWFwIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xuXG4gICAgICBpZiAobWFwID09PSB0aGlzLm1hcCkge1xuICAgICAgICB0aGlzLmNsZWFyQWxsTWFya2Vycyh0aGlzLm1hcmtlcnMpO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgc29tZSBtYXJrZXJzXG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gY29vcmRpbmF0ZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGNvb3JkID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNvb3JkLmxhdGl0dWRlLCBjb29yZC5sb25naXR1ZGUpO1xuICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICAgIG1hcDogbWFwXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2VudGVyT25NYXJrZXJzKG1hcmtlcnMsIG1hcCk7XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjZW50ZXJPbk1hcmtlcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjZW50ZXJPbk1hcmtlcnMoKSB7XG4gICAgICB2YXIgbWFya2VycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMubWFya2VycyA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciBtYXAgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0aGlzLm1hcCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gbWFya2Vyc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBtYXJrZXIgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENlbnRlciB0aGUgbWFwIGFjY29yZGluZyB0byBvdXIgbWFya2Vycy5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NyZWF0ZUNsdXN0ZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDbHVzdGVyKCkge1xuICAgICAgdmFyIG1hcmtlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0aGlzLm1hcmtlcnMgOiBhcmd1bWVudHNbMF07XG4gICAgICB2YXIgbWFwID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdGhpcy5tYXAgOiBhcmd1bWVudHNbMV07XG5cbiAgICAgIHZhciBtYXJrZXJDbHVzdGVyZXJPcHRpb25zID0ge1xuICAgICAgICBzdHlsZXM6IFt7XG4gICAgICAgICAgdGV4dENvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgIHVybDogJ2ltZy9tYXJrZXIuc3ZnJyxcbiAgICAgICAgICBoZWlnaHQ6IDUyLFxuICAgICAgICAgIHdpZHRoOiAzMVxuICAgICAgICB9XSxcbiAgICAgICAgbWluaW11bUNsdXN0ZXJTaXplOiAxXG4gICAgICB9O1xuXG4gICAgICB2YXIgbWFya2VyQ2x1c3RlciA9IG5ldyBNYXJrZXJDbHVzdGVyZXIobWFwLCBtYXJrZXJzLCBtYXJrZXJDbHVzdGVyZXJPcHRpb25zKTtcbiAgICAgIHJldHVybiBtYXJrZXJDbHVzdGVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyQWxsTWFya2VycycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQWxsTWFya2VycygpIHtcbiAgICAgIHZhciBtYXJrZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdGhpcy5tYXJrZXJzIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICB3aGlsZSAobWFya2Vycy5sZW5ndGgpIHtcbiAgICAgICAgbWFya2Vycy5wb3AoKS5zZXRNYXAobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYXJrZXJzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RyaWdnZXJSZXNpemUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyUmVzaXplKCkge1xuICAgICAgdmFyIG1hcCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMubWFwIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG1hcCwgJ3Jlc2l6ZScpO1xuICAgICAgLy8gbWFwLnNldFpvb20obWFwLmdldFpvb20oKSk7XG4gICAgICBtYXAuc2V0Wm9vbSgxNik7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBNYXBDb250cm9sbGVyO1xufSgpO1xuXG4vLyBCdWcgY2hlY2tpbmcgZnVuY3Rpb24gdGhhdCB3aWxsIHRocm93IGFuIGVycm9yIHdoZW5ldmVyXG4vLyB0aGUgY29uZGl0aW9uIHNlbnQgdG8gaXQgaXMgZXZhbHVhdGVkIHRvIGZhbHNlXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgY29tcGxldGVFcnJvck1lc3NhZ2UgPSAnJztcblxuICAgIGlmIChhc3NlcnQuY2FsbGVyICYmIGFzc2VydC5jYWxsZXIubmFtZSkge1xuICAgICAgY29tcGxldGVFcnJvck1lc3NhZ2UgPSBhc3NlcnQuY2FsbGVyLm5hbWUgKyAnOiAnO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoY29tcGxldGVFcnJvck1lc3NhZ2UpO1xuICB9XG59XG5cbi8vIGNsYXNzLXdpZGUgZ2xvYmFsc1xuXG4vLyBTZWFyY2ggZmlsdGVycyBvcHRpb25zIGNvbnRhaW5pbmcgYSAnc2VsZWN0ZWQnIGF0dHJpYnV0ZSB3aWxsIGJlIGNvbnNpZGVyZWRcbi8vIHBsYWNlaG9sZGVyIG9wdGlvbnMgYW5kIHdpbGwgcmVjZWl2ZSB0aGlzIHZhbHVlO1xudmFyIFBMQUNFSE9MREVSX1ZBTFVFID0gJyc7XG52YXIgSElEREVOX0NMQVNTID0gJ2hpZGRlbic7XG4vKipcbiAqXG4gKiBUaGlzIGNsYXNzIGFzc3VtZXMgdGhhdCB0aGUgZmlsdGVyIGVsZW1lbnRzIG5ldmVyIGNoYW5nZSBidXQgdGhhdFxuICogdGhlIHNlYXJjaCB0YXJnZXQgZWxlbWVudHMgbWF5IGNoYW5nZS5cbiAqXG4gKiBUaGlzIGNsYXNzIGFzc3VtZXMgdGhhdCBmaWx0ZXJzIHdpbGwgaGF2ZSBhIHByb3BlcnR5IGNhbGxlZCBjcml0ZXJpYVxuICogd2hpY2ggd2lsbCBoYXZlIG9uZSBvciBjcml0ZXJpb24gbmFtZXMgc2VwYXJhdGVkIGJ5IGEgc3BhY2UgY2hhcmFjdGVyLiBFYWNoXG4gKiBjcml0ZXJpb24gbXVzdCBjb3JyZXNwb25kIHRvIGEgZGF0YXNldCBwcm9wZXJ0eSBvZiB0aGUgdGFyZ2V0IGVsZW1lbnRzLlxuICpcbiAqIFRoZSBzZWFyY2ggd2lsbCBtYXRjaCBhIGZpbHRlciB2YWx1ZSB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgZGF0YXNldCBwcm9wZXJ0eSBvZlxuICogdGhlIHRhcmdldCBlbGVtZW50IHNwZWNpZmllZCBieSB0aGUgZmlsdGVyJ3MgY3JpdGVyaWEgYXR0cmlidXRlLlxuICpcbiAqIFx0QGNsYXNzIFNlYXJjaENvbnRyb2xsZXJcbiAqL1xuXG52YXIgU2VhcmNoQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSAge1N0cmluZ30gc2VhcmNoQmFyU2VsZWN0b3IgICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtICB7U3RyaW5nfSBzZWFyY2hGaWVsZHNTZWxlY3RvciAgICAgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRhcmdldHNDb250YWluZXJTZWxlY3RvciBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1N0cmluZ30gaW5mb0VsU2VsZWN0b3IgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IGZpbHRlcnNBcHBsaWVkY2FsbGJhY2sgICB0byBiZSBjYWxsZWQgd2l0aCAnbWF0Y2hlcydcbiAgICogXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgYW5kICdub25NYXRjaGVzJyBhcyBwYXJhbWV0ZXJzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIFNlYXJjaENvbnRyb2xsZXIoKSB7XG4gICAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hDb250cm9sbGVyKTtcblxuICAgIHZhciBzZWFyY2hCYXJTZWxlY3RvciA9IGNvbmZpZy5zZWFyY2hCYXJTZWxlY3RvcjtcbiAgICB2YXIgc2VhcmNoRmllbGRzU2VsZWN0b3IgPSBjb25maWcuc2VhcmNoRmllbGRzU2VsZWN0b3I7XG4gICAgdmFyIHRhcmdldHNDb250YWluZXJTZWxlY3RvciA9IGNvbmZpZy50YXJnZXRzQ29udGFpbmVyU2VsZWN0b3I7XG4gICAgdmFyIGluZm9FbFNlbGVjdG9yID0gY29uZmlnLmluZm9FbFNlbGVjdG9yO1xuICAgIHZhciBmaWx0ZXJzQXBwbGllZGNhbGxiYWNrID0gY29uZmlnLmZpbHRlcnNBcHBsaWVkY2FsbGJhY2s7XG5cbiAgICAvLyBHZXQgc2VhcmNoIGJhclxuICAgIHZhciBzZWFyY2hCYXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VhcmNoQmFyU2VsZWN0b3IpO1xuICAgIGFzc2VydChzZWFyY2hCYXJFbCAmJiBzZWFyY2hCYXJFbC5ub2RlTmFtZSwgJ05vIHNlYXJjaCBiYXIgZm91bmQgdXNpbmcgc2VsZWN0b3MgXFwnJyArIHNlYXJjaEJhclNlbGVjdG9yICsgJ1xcJycpO1xuICAgIHRoaXMuc2VhcmNoQmFyRWwgPSBzZWFyY2hCYXJFbDtcblxuICAgIC8vIEdldCBzZWFyY2ggZmllbGRzXG4gICAgdmFyIGZpbHRlcnMgPSBBcnJheS5mcm9tKHNlYXJjaEJhckVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VhcmNoRmllbGRzU2VsZWN0b3IpKTtcbiAgICBhc3NlcnQoZmlsdGVycyAmJiBmaWx0ZXJzLmxlbmd0aCwgJ05vIHNlYXJjaCBmaWVsZHMgZm91bmQgd2l0aCBzZWxlY3RvciBcXCcnICsgc2VhcmNoRmllbGRzU2VsZWN0b3IgKyAnXFwnJyk7XG4gICAgLy8gTGV0J3MgcmV2ZXJzZSBpdCBzbyB0aGF0IGluIHRoZSBzZWFyY2gsIHRoZSB0ZXh0IGlucHV0IGVsZW1lbnQgaXMgc2VhcmNoZWRcbiAgICAvLyBsYXN0IGFzIGl0IGZpdHMgbXVsdGlwbGUgY3JpdGVyaWEgYW5kIHNoYWRvd3Mgb3RoZXIgZWxlbWVudHMgaW4gdGhlXG4gICAgLy8gZmlsdGVyIHNlYXJjaC5cbiAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzLnJldmVyc2UoKTtcblxuICAgIC8vIEdldCBzZWFyY2ggdGFyZ2V0cyBjb250YWluZXIuIEl0IGNvbnRhaW5zIHRoZSBlbGVtZW50c1xuICAgIC8vIHRoYXQgd2lsbCBiZSBzZWFyY2hlZCBmb3IuXG4gICAgdmFyIHRhcmdldHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldHNDb250YWluZXJTZWxlY3Rvcik7XG4gICAgYXNzZXJ0KHRhcmdldHNDb250YWluZXIgJiYgdGFyZ2V0c0NvbnRhaW5lci5ub2RlTmFtZSwgJ05vIHZhbGlkIHNlYXJjaCBjb250YWluZXIgZm91bmQgdXNpbmcgc2VsZWN0b3IgJyArIHRhcmdldHNDb250YWluZXJTZWxlY3RvciArICcuJyk7XG4gICAgdGhpcy50YXJnZXRzQ29udGFpbmVyID0gdGFyZ2V0c0NvbnRhaW5lcjtcblxuICAgIC8vIEdldCBpbmZvIGVsZW1lbnQuIHdoZXJlIHdlIHdpbGwgc2hvdyBhIG1lc3NhZ2UgaWYgYW55dGhpbmcgZ29lcyB3cm9uZy5cbiAgICB2YXIgaW5mb0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbmZvRWxTZWxlY3Rvcik7XG4gICAgYXNzZXJ0KGluZm9FbCAmJiBpbmZvRWwubm9kZU5hbWUsICdObyB2YWxpZCBpbmZvIGVsZW1lbnQgZm91bmQgdXNpbmcgc2VsZWN0b3IgJyArIGluZm9FbFNlbGVjdG9yICsgJy4nKTtcbiAgICB0aGlzLmluZm9FbCA9IGluZm9FbDtcblxuICAgIGlmICh0eXBlb2YgZmlsdGVyc0FwcGxpZWRjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5maWx0ZXJzQXBwbGllZGNhbGxiYWNrID0gZmlsdGVyc0FwcGxpZWRjYWxsYmFjaztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJzQXBwbGllZGNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQmVnaW4gVUkgY29udHJvbFxuICAgIGhhbmRsZVVJKGZpbHRlcnMpO1xuXG4gICAgLy8gUHJlcGFyZSBmaWx0ZXJzXG4gICAgdGhpcy5faW5pdEZpbHRlckVsZW1lbnRzKGZpbHRlcnMpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vICAgIEZVTkNUSU9OQUxJVFkgQ09OVFJPTFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgYmFiZWxIZWxwZXJzLmNyZWF0ZUNsYXNzKFNlYXJjaENvbnRyb2xsZXIsIFt7XG4gICAga2V5OiAnX2luaXRGaWx0ZXJFbGVtZW50cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0RmlsdGVyRWxlbWVudHMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgZmlsdGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMuZmlsdGVycyA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgLy8gTGlzdGVuIHRvIGNoYW5nZXMgdG8gYWxsIGZpbHRlcnMgc28gd2UgY2FuIHRyaWdnZXIgYSBzZWFyY2hcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBmaWx0ZXJzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBmaWx0ZXIgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgIHZhciBjaGVja0V2ZW50ID0gZmlsdGVyLm5vZGVOYW1lID09PSAnU0VMRUNUJyA/ICdjaGFuZ2UnIDogJ2tleXVwJztcbiAgICAgICAgICBmaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcihjaGVja0V2ZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5hcHBseUZpbHRlcnMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgYXBwbHlGaWx0ZXJzXG4gICAgICogQHBhcmFtICB7QXJyYXlbSFRNTEVsZW1lbnRdfSBmaWx0ZXJzXG4gICAgICogQHBhcmFtICB7SFRNTEVsZW1lbnR9IHRhcmdldHNDb250YWluZXJcbiAgICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gaW5mb0VsIEVsZW1lbnQgdG8gc2hvdyBpbmZvIGFib3V0IHRoZSBzZWFyY2guXG4gICAgICogQHJldHVybiB7QXJyYXlbSFRNTEVsZW1lbnRdfSBBcnJheSBvZiBlbGVtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHNlYXJjaFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhcHBseUZpbHRlcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseUZpbHRlcnMoKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMuZmlsdGVycyA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciB0YXJnZXRzQ29udGFpbmVyID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdGhpcy50YXJnZXRzQ29udGFpbmVyIDogYXJndW1lbnRzWzFdO1xuICAgICAgdmFyIGluZm9FbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHRoaXMuaW5mb0VsIDogYXJndW1lbnRzWzJdO1xuXG4gICAgICBhc3NlcnQoZmlsdGVycywgJ05vIGZpbHRlcnMgcHJvdmlkZWQuJyk7XG4gICAgICBhc3NlcnQodGFyZ2V0c0NvbnRhaW5lciwgJ05vIGZpbHRlciB0YXJnZXRzIGNvbnRhaW5lciBwcm92aWRlZCcpO1xuICAgICAgYXNzZXJ0KGluZm9FbCwgJ05vIGluZm8gZWxlbWVudCBwcm92aWRlZCcpO1xuXG4gICAgICB2YXIgdGFyZ2V0cyA9IEFycmF5LmZyb20odGFyZ2V0c0NvbnRhaW5lci5jaGlsZHJlbik7XG4gICAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyB0YXJnZXQgZWxlbWVudHMgYmVpbmcgZmlsdGVyZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXRjaGVzID0gW107XG4gICAgICB2YXIgbm9uTWF0Y2hlcyA9IFtdO1xuXG4gICAgICAvLyBydW4gdGhyb3VnaCBhbGwgdGFyZ2V0IGVsZW1lbnRzXG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHRhcmdldHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBpdCBtYXRjaGVzIGFsbCBmaWx0ZXJzXG4gICAgICAgICAgdmFyIG1hdGNoID0gdGFyZ2V0TWF0Y2hlc0ZpbHRlcnModGFyZ2V0LCBmaWx0ZXJzKTtcblxuICAgICAgICAgIC8vIFNob3cgb3IgaGlkZSBpdCBiYXNlZCBvbiB0aGF0XG4gICAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gbWF0Y2ggPyBtYXRjaGVzIDogbm9uTWF0Y2hlcztcbiAgICAgICAgICBkZXN0aW5hdGlvbi5wdXNoKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kLCB0aGVuIGxldCdzIHNob3cgZXZlcnl0aGluZyBhbmQgc2hvdyBhXG4gICAgICAgIC8vIG1lc3NhZ2UgZXhwbGFpbmluZyB0aGUgb3V0Y29tZS5cbiAgICAgICAgaW5mb0VsLmNsYXNzTGlzdC5yZW1vdmUoSElEREVOX0NMQVNTKTtcbiAgICAgICAgaW5mb0VsLmlubmVyVGV4dCA9ICdObyBwcm9wZXJ0aWVzIHdlcmUgZm91bmQgdXNpbmcgdGhlc2UgZmlsdGVycyc7XG5cbiAgICAgICAgbWF0Y2hlcyA9IHRhcmdldHM7XG4gICAgICAgIG5vbk1hdGNoZXMgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHdlIGhhZCBtYXRjaGVzLCB0aGVuIGxldCdzIHNob3cgdGhlbSBhbmQgaGlkZSBhbGwgb3RoZXIgc3R1ZmZcbiAgICAgICAgaW5mb0VsLmNsYXNzTGlzdC5hZGQoSElEREVOX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBzaG93KGVsLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgbm9uTWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBzaG93KGVsLCBmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5maWx0ZXJzQXBwbGllZGNhbGxiYWNrKG1hdGNoZXMsIG5vbk1hdGNoZXMpO1xuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUVORCBPRiBGVU5DVElPTkFMSVRZIENPTlRST0xTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmlsbHMgYSBmaWVsZCB3aXRoIGEgdmFsdWUgb3Igc2VsZWN0cyBhIGRyb3Bkb3duIG9wdGlvblxuICAgICAqIHRoYXQgbWF0Y2hlcyB0aGUgdmFsdWUuXG4gICAgICogQG1ldGhvZCBmaWxsRmllbGRCeUluZGV4XG4gICAgICogQHBhcmFtICB7SW50IC8gSFRNTEVsZW1lbnR9IGZpbHRlclJlZmVyZW5jZSBDYW4gYmUgdGhlIGZpbHRlciBpdHNlbGYgb3IgdGhlIGZpbHRlciBpbmRleFxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0gIHtBcnJheVtIVE1MRWxlbWVudF19IGZpbHRlcnNcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmaWxsRmlsdGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEZpbHRlcihmaWx0ZXJSZWZlcmVuY2UsIHZhbHVlKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHRoaXMuZmlsdGVycyA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgdmFyIGZpbHRlciA9IHZvaWQgMDtcblxuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJSZWZlcmVuY2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIGluZGV4IHdhcyBwcm92aWRlZFxuICAgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW2ZpbHRlclJlZmVyZW5jZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGUgZmlsdGVyIGl0c2VsZiB3YXMgcHJvdmlkZWQuXG4gICAgICAgIGZpbHRlciA9IGZpbHRlclJlZmVyZW5jZTtcbiAgICAgIH1cblxuICAgICAgYXNzZXJ0KGZpbHRlciAmJiBmaWx0ZXIubm9kZU5hbWUsICdJbnZhbGlkIFxcJ2ZpbHRlclJlZmVyZW5jZVxcJyBwcm92aWRlZDogJyArIGZpbHRlcik7XG4gICAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJywgJ0ludmFsaWQgXFwndmFsdWVcXCcgdmFsdWU6ICcgKyB2YWx1ZSk7XG5cbiAgICAgIHZhciBpc1R5cGVhYmxlSW5wdXQgPSBmaWx0ZXIubm9kZU5hbWUgPT09ICdJTlBVVCcgJiYgZmlsdGVyLmdldEF0dHJpYnV0ZSgndHlwZScpICYmIChmaWx0ZXIuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9Mb3dlckNhc2UoKSA9PT0gJ3NlYXJjaCcgfHwgZmlsdGVyLmdldEF0dHJpYnV0ZSgndHlwZScpLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0Jyk7XG5cbiAgICAgIGlmIChpc1R5cGVhYmxlSW5wdXQpIHtcbiAgICAgICAgZmlsdGVyLnZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5ub2RlTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgLy8gTGV0J3MgZ2V0IHRoZSB2YWx1ZSBvZiBhbGwgdGhlIG9wdGlvbnMgaW4gdGhlIHNlbGVjdFxuICAgICAgICB2YXIgb3B0aW9uRWxlbWVudHMgPSBBcnJheS5mcm9tKGZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKSk7XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXMgPSBvcHRpb25FbGVtZW50cy5tYXAoZnVuY3Rpb24gKG9wdGlvbkVsKSB7XG4gICAgICAgICAgLy8gSWYgaXQgaXMgc2V0IGFzIHNlbGVjdGVkIGlzIGJlY2F1c2UgaXQgaXMgYSBwbGFjZWhvbGRlciBvcHRpb24uXG4gICAgICAgICAgaWYgKG9wdGlvbkVsLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUExBQ0VIT0xERVJfVkFMVUU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBvcHRpb25FbC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgb3B0aW9uRWwuaW5uZXJIVE1MO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdmFsdWVPcHRpb25JbmRleCA9IG9wdGlvblZhbHVlcy5maW5kSW5kZXgoZnVuY3Rpb24gKG9wdGlvblZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNlYXJjaE1hdGNoKHZhbHVlLCBvcHRpb25WYWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh2YWx1ZU9wdGlvbkluZGV4ID4gLTEpIHtcbiAgICAgICAgICBmaWx0ZXIuc2VsZWN0ZWRJbmRleCA9IHZhbHVlT3B0aW9uSW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlIHZhbHVlIHdhcyBub3QgZm91bmQsIHNvIGxldCdzIGp1c3QgZG8gbm90aGluZy5cbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIG9wdGlvbiBhdmFpbGFibGUgZm9yIHZhbHVlIFxcJycgKyB2YWx1ZSArICdcXCcnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2dldEZpbHRlckJ5Q3JpdGVyaW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVyQnlDcml0ZXJpb24oY3JpdGVyaW9uKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHRoaXMuZmlsdGVycyA6IGFyZ3VtZW50c1sxXTtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gZmlsdGVyc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBmaWx0ZXIgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICB2YXIgZmlsdGVyQ3JpdGVyaWEgPSBnZXRGaWx0ZXJDcml0ZXJpYShmaWx0ZXIpO1xuICAgICAgICAgIGlmIChmaWx0ZXJDcml0ZXJpYS5pbmRleE9mKGNyaXRlcmlvbikgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTZWFyY2hDb250cm9sbGVyO1xufSgpO1xuXG5mdW5jdGlvbiBzZWFyY2hNYXRjaCh0eHQxLCB0eHQyKSB7XG4gIGlmICh0eXBlb2YgdHh0MSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIHR4dDIgIT09ICdzdHJpbmcnKSB7XG4gICAgdHh0MSA9IHR4dDEudG9TdHJpbmcoKTtcbiAgICB0eHQyID0gdHh0Mi50b1N0cmluZygpO1xuICB9XG5cbiAgdHh0MSA9IHR4dDEudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gIHR4dDIgPSB0eHQyLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gIGlmICh0eHQxID09PSAnJyB8fCB0eHQyID09PSAnJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBmb3VuZEluc2lkZVR4dDEgPSB0eHQxLmluZGV4T2YodHh0MikgPj0gMDtcbiAgdmFyIGZvdW5kSW5zaWRlVHh0MiA9IHR4dDIuaW5kZXhPZih0eHQxKSA+PSAwO1xuICByZXR1cm4gZm91bmRJbnNpZGVUeHQxIHx8IGZvdW5kSW5zaWRlVHh0Mjtcbn1cblxuLy8gSGlkZXMgb3Igc2hvd3MgYW4gZWxlbWVudFxuZnVuY3Rpb24gc2hvdyhlbCwgc2hvd0Jvb2wpIHtcbiAgaWYgKHNob3dCb29sKSB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH0gZWxzZSB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxufVxuXG4vKipcbiAqIEBtZXRob2QgZ2V0VGFyZ2V0UHJvcGVydHlcbiAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSAge1N0cmluZ30gcHJvcGVydHlcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0UHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICByZXR1cm4gdGFyZ2V0LmRhdGFzZXRbcHJvcGVydHldO1xufVxuXG4vKipcbiAqIEBtZXRob2QgZ2V0RmlsdGVyQ3JpdGVyaWFcbiAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBmaWx0ZXJcbiAqIEByZXR1cm4ge0FycmF5W3N0cmluZ119XG4gKi9cbmZ1bmN0aW9uIGdldEZpbHRlckNyaXRlcmlhKGZpbHRlcikge1xuICBhc3NlcnQoZmlsdGVyLCAnTm8gZmlsdGVyIHByb3ZpZGVkLicpO1xuICB2YXIgY3JpdGVyaWFTdHJpbmcgPSBmaWx0ZXIuZGF0YXNldC5jcml0ZXJpYTtcbiAgaWYgKHR5cGVvZiBjcml0ZXJpYVN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICB2YXIgY3JpdGVyaWEgPSBjcml0ZXJpYVN0cmluZy5zcGxpdCgnICcpO1xuICByZXR1cm4gY3JpdGVyaWE7XG59XG5cbmZ1bmN0aW9uIHRhcmdldE1hdGNoZXNGaWx0ZXJzKHRhcmdldCwgZmlsdGVycykge1xuICB2YXIgbWF0Y2hlZCA9IHRydWU7XG5cbiAgLy8gQ2hlY2sgaWYgaXQgbWF0Y2hlcyBhbGwgZmlsdGVyc1xuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I0ID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjQgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gZmlsdGVyc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IChfc3RlcDQgPSBfaXRlcmF0b3I0Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZSkge1xuICAgICAgdmFyIGZpbHRlciA9IF9zdGVwNC52YWx1ZTtcblxuICAgICAgdmFyIGNyaXRlcmlhID0gZ2V0RmlsdGVyQ3JpdGVyaWEoZmlsdGVyKTtcblxuICAgICAgdmFyIHZhbHVlID0gZmlsdGVyLnZhbHVlO1xuXG4gICAgICAvLyBQbGFjZWhvbGRlciB2YWx1ZXMgZG8gbm90IG1ha2UgYSBtYXRjaCBmYWlsLlxuICAgICAgaWYgKHZhbHVlID09PSBQTEFDRUhPTERFUl9WQUxVRSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZpbHRlck1hdGNoZWQgPSBmYWxzZTtcblxuICAgICAgLy8gQ2hlY2sgYWdhaW5zdCBhbGwgY3JpdGVyaWEgZm9yIHRoZSBmaWx0ZXI7XG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNSA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yNSA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IGNyaXRlcmlhW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA1OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gKF9zdGVwNSA9IF9pdGVyYXRvcjUubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGNyaXRlcmlvbiA9IF9zdGVwNS52YWx1ZTtcblxuICAgICAgICAgIHZhciB0YXJnZXRQcm9wZXJ0eVZhbHVlID0gZ2V0VGFyZ2V0UHJvcGVydHkodGFyZ2V0LCBjcml0ZXJpb24pIHx8ICcnO1xuICAgICAgICAgIC8vIElmIGl0IG1hdGNoZXMgYW55IGNyaXRlcmlvbiwgdGhlbiBpdCBtYXRjaGVzIHRoZSBmaWx0ZXIuXG4gICAgICAgICAgaWYgKHNlYXJjaE1hdGNoKHZhbHVlLCB0YXJnZXRQcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgICAgZmlsdGVyTWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBpdCBkb2Vzbid0IG1hdGNoIGFueSBvbmUgb2YgdGhlIGZpbHRlcnMsIHRoZW4gaXQgaXMgbm90IGFcbiAgICAgICAgLy8gc2VhcmNoIG1hdGNoLlxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yNSA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yNSA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSAmJiBfaXRlcmF0b3I1LnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I1O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWZpbHRlck1hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjQpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vICAgIFVJIENPTlRST0xTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8qKlxuICogQ29udHJvbHMgdGhlIGhpZ2hsaWdodGluZyBvZiBzZWxlY3RlZCBmaWx0ZXJzXG4gKiBAbWV0aG9kIGhhbmRsZVVJXG4gKiBAcGFyYW0gIHtBcnJheVtIVE1MRWxlbWVudF19IGZpbHRlcnNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVVJKGZpbHRlcnMpIHtcbiAgYXNzZXJ0KGZpbHRlcnMgJiYgZmlsdGVycy5sZW5ndGggPiAwLCAnTm8gc2VhcmNoIGZpbHRlcnMgcHJvdmlkZWQuJyk7XG5cbiAgZnVuY3Rpb24gZ2V0QnV0dG9uQ29udGFpbmVyKGJ0bikge1xuICAgIGlmIChidG4ubm9kZU5hbWUgJiYgYnRuLm5vZGVOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICByZXR1cm4gYnRuLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBidG47XG4gIH1cblxuICAvLyBIaWdobGlnaHQgZmllbGQgb24gZm9jdXMgYW5kIGxlYXZlIGl0XG4gIC8vIGhpZ2hsaWdodGVkIGlmIGFueXRoaW5nIHdhcyBjaGFuZ2VkIGluIHRoZSBvcHRpb25zLlxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I2ID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjYgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHtcbiAgICAgIHZhciBmaWx0ZXIgPSBfc3RlcDYudmFsdWU7XG5cbiAgICAgIGZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsbGVkSW5wdXQgPSBmaWx0ZXIudmFsdWUgJiYgZmlsdGVyLnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwO1xuICAgICAgICB2YXIgbm9uUGxhY2Vob2xkZXJPcHRpb25TZWxlY3RlZCA9IGZpbHRlci5zZWxlY3RlZEluZGV4ICYmIGZpbHRlci5zZWxlY3RlZEluZGV4ID4gMDtcblxuICAgICAgICBpZiAoIWZpbGxlZElucHV0ICYmICFub25QbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGdldEJ1dHRvbkNvbnRhaW5lcihmaWx0ZXIpO1xuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzZWFyY2gtYmFyLWJ0bi1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGdldEJ1dHRvbkNvbnRhaW5lcihmaWx0ZXIpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2VhcmNoLWJhci1idG4tYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IGZpbHRlcnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDY7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSAoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWUpIHtcbiAgICAgIF9sb29wKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjYgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yNiA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiAmJiBfaXRlcmF0b3I2LnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3I2LnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I2KSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUVORCBPRiBVSSBDT05UUk9MIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gR2xvYmFsIHZhbHVlc1xudmFyIFNFQVJDSF9CQVJfU0VMRUNUT1IgPSAnLnNlYXJjaC1iYXInO1xudmFyIE1BUF9UQVJHRVRfU0VMRUNUT1IgPSAnLmpzLXByb3BlcnR5LW1hcCc7XG52YXIgVElMRVNfTElTVF9DT05UQUlORVJfU0VMRUNUT1IgPSAnLmpzLXByb3BlcnR5LWxpc3QnO1xudmFyIFNFQVJDSF9JTlBVVF9TRUxFQ1RPUiA9ICcuanMtc2VhcmNoLWlucHV0JztcbnZhciBTRUFSQ0hfSU5GT19TRUxFQ1RPUiA9ICcuanMtc2VhcmNoLWluZm8nO1xuXG4vKipcbiAqIERpc3BsYXkgcHJvcGVydGllcyBvbiB0aGUgbWFwXG4gKiBAZnVuY3Rpb24gc2hvd09uTWFwXG4gKiBAcGFyYW0gIHtBcnJheX0gY29vcmRpbmF0ZXMgRWFjaCBpdGVtIGluIHRoZSAnY29vcmRpbmF0ZScgYXJyYXlcbiAqICAgICAgICAgICAgICAgICBtdXN0IGhhdmUgYSAnbGF0aXR1ZGUnIGFuZCBhICdsb25naXR1ZGUnIHByb3BlcnR5XG4gKiBAcGFyYW0gIHtPYmplY3R9IG1hcENvbnRyb2xsZXJcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHNob3dPbk1hcChjb29yZGluYXRlcywgbWFwQ29udHJvbGxlcikge1xuICBtYXBDb250cm9sbGVyLmNyZWF0ZU1hcmtlcnNGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICBtYXBDb250cm9sbGVyLmNyZWF0ZUNsdXN0ZXIoKTtcbn1cblxuZnVuY3Rpb24gZmlsbFNlYXJjaEZyb21RdWVyeVBhcmFtZXRlcnMoc2VhcmNoQ29udHJvbGxlcikge1xuICB2YXIgQXJnID0gTWFrZUFyZygpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5ldy1jYXBcbiAgdmFyIGdldFBhcmFtZXRlcnMgPSBBcmcuYWxsKCk7XG4gIHZhciBnZXRQYXJhbWV0ZXJzS2V5cyA9IE9iamVjdC5rZXlzKGdldFBhcmFtZXRlcnMpO1xuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGdldFBhcmFtZXRlcnNLZXlzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgdmFyIHBhciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICB2YXIgZmlsdGVyID0gc2VhcmNoQ29udHJvbGxlci5nZXRGaWx0ZXJCeUNyaXRlcmlvbihwYXIpO1xuICAgICAgaWYgKGZpbHRlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSBnZXRQYXJhbWV0ZXJzW3Bhcl07XG4gICAgICAgIHZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgc2VhcmNoQ29udHJvbGxlci5maWxsRmlsdGVyKGZpbHRlciwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdyB3ZSBhcHBseSB0aGUgZmlsdGVyLlxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNlYXJjaENvbnRyb2xsZXIuYXBwbHlGaWx0ZXJzKCk7XG59XG5cbmZ1bmN0aW9uIGluaXRQYWdlKCkge1xuICAvLyBTdGFydCBjb250cm9sIG9mIHNlYXJjaCBiYXJcbiAgdmFyIHNlYXJjaENvbnRyb2xsZXJDb25maWcgPSB7XG4gICAgc2VhcmNoQmFyU2VsZWN0b3I6IFNFQVJDSF9CQVJfU0VMRUNUT1IsXG4gICAgc2VhcmNoRmllbGRzU2VsZWN0b3I6IFNFQVJDSF9JTlBVVF9TRUxFQ1RPUixcbiAgICB0YXJnZXRzQ29udGFpbmVyU2VsZWN0b3I6IFRJTEVTX0xJU1RfQ09OVEFJTkVSX1NFTEVDVE9SLFxuICAgIGluZm9FbFNlbGVjdG9yOiBTRUFSQ0hfSU5GT19TRUxFQ1RPUixcbiAgICAvLyBmaWx0ZXIgYXBwbGllZCBjYWxsYmFja1xuICAgIGZpbHRlcnNBcHBsaWVkY2FsbGJhY2s6IGZ1bmN0aW9uIGZpbHRlcnNBcHBsaWVkY2FsbGJhY2sobWF0Y2hlcykge1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gW107XG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IG1hdGNoZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICB2YXIgdGlsZSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgIGlmICghdGlsZS5kYXRhc2V0LmxvbmdpdHVkZSB8fCAhdGlsZS5kYXRhc2V0LmxhdGl0dWRlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aWxlLmRhdGFzZXQubGF0aXR1ZGUsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRpbGUuZGF0YXNldC5sb25naXR1ZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzaG93T25NYXAoY29vcmRpbmF0ZXMsIG1hcENvbnRyb2xsZXIpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgc2VhcmNoQ29udHJvbGxlciA9IG5ldyBTZWFyY2hDb250cm9sbGVyKHNlYXJjaENvbnRyb2xsZXJDb25maWcpO1xuXG4gIC8vIENyZWF0ZSBtYXAgYW5kIGluc3RhbnRpYXRlIGEgY29udHJvbGxlclxuICB2YXIgbWFwQ29udHJvbGxlciA9IG5ldyBNYXBDb250cm9sbGVyKE1BUF9UQVJHRVRfU0VMRUNUT1IpO1xuXG4gIGZpbGxTZWFyY2hGcm9tUXVlcnlQYXJhbWV0ZXJzKHNlYXJjaENvbnRyb2xsZXIsIG1hcENvbnRyb2xsZXIpO1xufVxuXG5pbml0UGFnZSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
